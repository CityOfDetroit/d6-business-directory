{"version":3,"file":"assets/js/main.js","mappings":"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","sources":["webpack://d6-business-directory/./src/components/Geocoder.js","webpack://d6-business-directory/./src/components/NavigationTools.js","webpack://d6-business-directory/./src/components/Display.js","webpack://d6-business-directory/./src/components/DataLoader.js","webpack://d6-business-directory/./src/components/D6BusinessMap.js","webpack://d6-business-directory/./src/index.js"],"sourcesContent":["'use strict';\nexport default class Geocoder extends HTMLElement {\n\n    static get observedAttributes() {\n        return ['form', 'parcelStatus', 'user'];\n    }\n\n    constructor() {\n        // Always call super first in constructor\n        super();\n\n        // Set Attributes\n        this.form = null;\n        this.parcelStatus = 'Invalid';\n        this.user = null;\n        this.styles = document.createElement('style');\n        this.styles.textContent = `\n            @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n            #geocoder {width: 100%}\n            input {width: calc(100% - 2em); padding: 1em; border:.1em solid #e6e6e6; font-size: 1em;}\n        `;\n\n        // Create a shadow root\n        const shadow = this.attachShadow({ mode: 'open' });\n\n        // Create geocoder section\n        shadow.appendChild(this.styles);\n        const geocoderWraper = document.createElement('article');\n        geocoderWraper.id = 'geocoder';\n        let form = document.createElement('form');\n        let label = document.createElement('label');\n        label.style.fontFamily = 'Montserrat, sans-serif';\n        label.style.fontWeight = 'bold';\n        let input = document.createElement('input');\n        let suggestions = document.createElement('ul');\n        let list = document.createElement('datalist');\n        let icon = document.createElement('i');\n        form.addEventListener('submit', (ev) => {\n            this.submit(ev, this);\n        });\n        icon.className = 'fas fa-map-marker-alt';\n        // Get label text\n        const app = document.getElementsByTagName('my-home-info');\n        label.innerText = \"Property Address:\";\n        try {\n            if (app[0].getAttribute('data-geocoder-label')){\n                if(app[0].getAttribute('data-geocoder-label') != ''){\n                    label.innerText = app[0].getAttribute('data-geocoder-label');\n                }\n            }\n        } catch (error) {\n            \n        }\n        label.setAttribute(\"for\", \"geocoder-input\");\n        input.type = 'text';\n        input.setAttribute('list', 'addresses-list');\n        input.placeholder = 'Enter address';\n        input.setAttribute('id', 'geocoder-input');\n        input.setAttribute('autocomplete', 'off');\n        input.addEventListener('keyup', (ev) => {\n            this.inputChange(ev, this);\n        });\n        list.setAttribute('id', 'addresses-list');\n\n\n        form.appendChild(label);\n        form.appendChild(input);\n        form.appendChild(icon);\n        // form.appendChild(suggestions);\n        form.appendChild(list);\n        this.form = form;\n        geocoderWraper.appendChild(form);\n        shadow.appendChild(geocoderWraper);\n    }\n\n    supplementGeocoder(address, geocoder, type) {\n        const app = document.getElementsByTagName('my-home-info');\n        let tempAddr = address.split(\",\");\n        tempAddr = tempAddr[0];\n        tempAddr = tempAddr.split(\" \");\n        let newTempAddr = '';\n        let size = tempAddr.length;\n        tempAddr.forEach(function (item, index) {\n            newTempAddr += item;\n            ((index < size) && (index + 1) !== size) ? newTempAddr += '+' : 0;\n        });\n        let url = `https://opengis.detroitmi.gov/opengis/rest/services/BaseUnits/BaseUnitGeocoder/GeocodeServer/findAddressCandidates?Address=&Address2=&Address3=&Neighborhood=&City=&Subregion=&Region=&Postal=&PostalExt=&CountryCode=&SingleLine=${newTempAddr}&outFields=*&maxLocations=&matchOutOfRange=true&langCode=&locationType=&sourceCountry=&category=&location=&distance=&searchExtent=&outSR=&magicKey=&f=json`;\n\n        try {\n            fetch(url)\n                .then((resp) => resp.json()) // Transform the data into json\n                .then(function (data) {\n                    // console.log(data);\n                    if (type === 'suggestions') {\n                        data.candidates.forEach((item) => {\n                            let sugg = document.createElement('option');\n                            if (item.attributes.parcel_id === '') {\n                                sugg.value = item.address;\n                                sugg.setAttribute('data-parsel', 'no-parcel');\n                            } else {\n                                sugg.value = `${item.address} RECOMMENDED`;\n                                sugg.setAttribute('data-parsel', item.attributes.parcel_id);\n                            }\n\n                            sugg.onclick = (ev) => {\n                                geocoder.selectSuggestion(ev, geocoder);\n                            }\n                            geocoder.form.childNodes[3].appendChild(sugg);\n                        });\n                    } else {\n                        if (data.candidates.length) {\n                            let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/City_of_Detroit_Boundary/FeatureServer/0/query?where=&objectIds=&time=&geometry=${data.candidates[0].location.x}%2C+${data.candidates[0].location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=4326&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=`;\n                            try {\n                                fetch(url)\n                                    .then((resp) => resp.json()) // Transform the data into json\n                                    .then(function (city) {\n                                        if (city.features.length) {\n                                            let parcel = null;\n                                            let location;\n                                            data.candidates.forEach((item) => {\n                                                if (item.attributes.parcel_id !== '') {\n                                                    if (geocoder.checkParcelValid(item.attributes.parcel_id)) {\n                                                        parcel = item;\n                                                    }\n                                                }\n                                            });\n                                            (parcel == null) ? location = data.candidates[0].location : location = null;\n                                            if (parcel === null) {\n                                                geocoder.parcelStatus = 'Invalid';\n                                                geocoder.needGeocode(address, geocoder, location);\n                                                geocoder.clearSuggestions(geocoder);\n                                                app[0].setAttribute('data-parcel-id', JSON.stringify(data.candidates[0]));\n                                                // geocoder.controller.panel.loaderToggle(true);\n                                                // geocoder.controller.panel.clearPanel();\n                                                // geocoder.controller.dataManager.buildData(data.candidates[0], geocoder.controller);\n                                            } else {\n                                                geocoder.parcelStatus = 'Valid';\n                                                geocoder.needGeocode(address, geocoder, location);\n                                                geocoder.clearSuggestions(geocoder);\n                                                app[0].setAttribute('data-parcel-id', JSON.stringify(parcel));\n                                                // geocoder.controller.panel.loaderToggle(true);\n                                                // geocoder.controller.panel.clearPanel();\n                                                // geocoder.controller.dataManager.buildData(parcel, geocoder.controller);\n                                            }\n                                        } else {\n                                            geocoder.parcelStatus = 'Invalid';\n                                            geocoder.needGeocode(address, geocoder, location);\n                                            geocoder.clearSuggestions(geocoder);\n                                            app[0].setAttribute('data-app-state', 'error');\n                                        }\n                                    });\n                            } catch (error) {\n                                geocoder.parcelStatus = 'Invalid';\n                                geocoder.needGeocode(address, geocoder, location);\n                                geocoder.clearSuggestions(geocoder);\n                                app[0].setAttribute('data-app-state', 'error');\n                            }\n                        } else {\n                            geocoder.parcelStatus = 'Invalid';\n                            geocoder.needGeocode(address, geocoder, location);\n                            geocoder.clearSuggestions(geocoder);\n                            app[0].setAttribute('data-app-state', 'error');\n                        }\n                    }\n                });\n        } catch (error) {\n            geocoder.parcelStatus = 'Invalid';\n            geocoder.needGeocode(address, geocoder, location);\n            geocoder.clearSuggestions(geocoder);\n            app[0].setAttribute('data-app-state', 'error');\n        }\n    }\n\n    selectSuggestion(ev, geocoder) {\n        let selection = null;\n        if (ev.target.tagName === 'SPAN') {\n            selection = ev.target.parentNode;\n        } else {\n            selection = ev.target;\n        }\n        if (selection.attributes[0].value === 'no-parcel') {\n            geocoder.clearSuggestions(geocoder);\n            geocoder.supplementGeocoder(selection.innerText, geocoder, 'submit');\n        } else {\n            geocoder.supplementGeocoder(selection.innerText, geocoder, 'submit');\n        }\n    }\n\n    inputChange(ev, geocoder) {\n        switch (ev.key) {\n            case 'Enter':\n                (ev.target.value != '' && ev.target.value != undefined) ? geocoder.supplementGeocoder(ev.target.value, geocoder, 'submit') : 0;\n                break;\n\n            case 'ArrowDown':\n\n                break;\n\n            case 'ArrowUp':\n\n                break;\n\n            case 'ArrowRight':\n\n                break;\n\n            case 'ArrowLeft':\n\n                break;\n\n            case undefined:\n                (ev.target.value != '' && ev.target.value != undefined) ? geocoder.supplementGeocoder(ev.target.value, geocoder, 'submit') : 0;\n                break;\n\n            default:\n                geocoder.clearSuggestions(geocoder);\n                geocoder.supplementGeocoder(ev.target.value, geocoder, 'suggestions');\n                break;\n        }\n    }\n\n    clearSuggestions(geocoder) {\n        while (geocoder.form.childNodes[3].firstChild) {\n            geocoder.form.childNodes[3].removeChild(geocoder.form.childNodes[3].firstChild);\n        }\n    }\n\n    needGeocode(address, geocoder, location) {\n        fetch('https://us-central1-local-services-loopkup.cloudfunctions.net/getToken')\n            .then((resp) => resp.json()) // Transform the data into json\n            .then(function (data) {\n                let cleanAddress = address.split(' RECOMMENDED')[0];\n                let params = [\n                    {\n                        \"attributes\": {\n                            \"valid_parcel_status\": geocoder.parcelStatus,\n                            \"user_input\": cleanAddress\n                        },\n                        \"geometry\": {\n                            \"x\": 0,\n                            \"y\": 0\n                        }\n                    }\n                ];\n                if (location != null) {\n                    params[0].geometry.x = location.x;\n                    params[0].geometry.y = location.y;\n                }\n                let request = new Request(`https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/addressvalidator/FeatureServer/0/addFeatures?token=${data.access_token}&features=${encodeURIComponent(JSON.stringify(params))}&f=json`, {\n                    method: 'POST',\n                    body: '',\n                    headers: new Headers(),\n                    mode: 'cors',\n                    cache: 'default'\n                });\n                fetch(request)\n                    .then((res) => {\n                        // console.log(res);\n                    });\n            });\n    }\n\n    checkParcelValid(parcel){\n        return /\\d/.test(parcel);\n    }\n\n    submit(ev, geocoder) {\n        ev.preventDefault();\n        geocoder.supplementGeocoder(ev.target['0'].value, geocoder, 'submit');\n    }\n}","export default class NavigationTools extends HTMLElement {\n\n    constructor() {\n        // Always call super first in constructor\n        super();\n\n        // Create a shadow root\n        const shadow = this.attachShadow({ mode: 'open' });\n\n        // Creating display styles\n        this.navToolsStyle = document.createElement('style');\n        this.navToolsStyle.textContent = `\n            #nav-tools-wrapper { display: flex; flex-direction: column;}\n            button.clear { font-size: 1.25em; width: 2.5em; height: 2.5em; background-color: #FEB70D; cursor: pointer; border: none; }\n            button.nav { width: 3.75em; height: 3.75em; border: none; cursor: pointer;background: #fff; }\n            button.nav:hover { background-color: #e6e6e6; transition: all 500ms cubic-bezier(.64,.09,.08,1); }\n            button.nav.active { background-color: #9fd5b3; }\n            button.nav img { width: 100%; }\n        `;\n\n        // Start loading display content\n        this.loadNavTools(this);\n    }\n\n    clearDisplay(display) {\n        const shadow = display.shadowRoot;\n        while (shadow.firstChild) {\n            shadow.removeChild(shadow.firstChild);\n        }\n    }\n\n    loadNavTools(navTools) {\n        const app = document.getElementsByTagName('d6-business-map');\n        const appStatus = app[0].getAttribute('data-app-state');\n        const appMode = app[0].getAttribute('data-app-mode');\n        const initialSets = app[0].getAttribute('data-inital-sets');\n        const initalMapStatus = app[0].getAttribute('data-initial-map-available');\n        const shadow = navTools.shadowRoot;\n        shadow.appendChild(navTools.navToolsStyle);\n        const navToolsWrapper = document.createElement('section');\n        navToolsWrapper.id = 'nav-tools-wrapper';\n        navToolsWrapper.setAttribute('role', 'navigation');\n        navToolsWrapper.setAttribute('aria-label', 'Data Navigation');\n        const clearResultsBtn = document.createElement('cod-button');\n        clearResultsBtn.addEventListener('click', (ev) => {\n            if (app[0].getAttribute('data-app-mode') == 'my-home-info') {\n                app[0].setAttribute('data-app-state', 'welcome-screen');\n                app[0].setAttribute('data-active-sets', 'assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection');\n            } else {\n                app[0].setAttribute('data-app-state', 'active-screen');\n                app[0].setAttribute('data-active-sets', initialSets);\n            }\n            if(initalMapStatus == 'true'){\n                app[0].setAttribute('data-map-available', 'true');\n            }else{\n                app[0].setAttribute('data-map-available', 'false');\n            }\n            app[0].setAttribute('data-parcel-id', 'none');\n            app[0].setAttribute('data-api-stored-datasets', '{}');\n            app[0].setAttribute('data-api-active-datasets', 'none');\n            app[0].setAttribute('data-active-section', 'property');\n        });\n        clearResultsBtn.setAttribute('data-primary', true);\n        clearResultsBtn.setAttribute('data-label', 'x');\n        clearResultsBtn.setAttribute('data-size', 'lg');\n        clearResultsBtn.setAttribute('data-hover', false);\n        clearResultsBtn.setAttribute('data-extra-classes', 'fw-bold');\n        clearResultsBtn.setAttribute('data-background-color', 'warning');\n        clearResultsBtn.setAttribute('data-img', '');\n        clearResultsBtn.setAttribute('data-img-alt', '');\n        clearResultsBtn.setAttribute('data-shape', 'square');\n        clearResultsBtn.setAttribute('data-icon', '');\n        navToolsWrapper.appendChild(clearResultsBtn);\n\n        if (appMode == 'my-home-info' && appStatus != 'error') {\n            const propertyDataBtn = document.createElement('cod-button');\n            propertyDataBtn.setAttribute('data-label', '');\n            propertyDataBtn.setAttribute('data-size', 'lg');\n            propertyDataBtn.setAttribute('data-img', 'https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/home.png');\n            propertyDataBtn.setAttribute('data-img-alt', 'about this property');\n            propertyDataBtn.setAttribute('data-shape', 'square');\n            propertyDataBtn.setAttribute('data-nav-value', 'about this property');\n            propertyDataBtn.setAttribute('data-icon', '');\n            if (app[0].getAttribute('data-active-section') == 'about this property') {\n                propertyDataBtn.setAttribute('data-background-color', 'success');\n                propertyDataBtn.setAttribute('data-primary', true);\n            } else {\n                propertyDataBtn.setAttribute('data-background-color', 'secondary');\n                propertyDataBtn.setAttribute('data-primary', false);\n                propertyDataBtn.addEventListener('click', (ev) => {\n                    if (app[0].getAttribute('data-api-active-datasets') != 'none') {\n                        let storedData = JSON.parse(app[0].getAttribute('data-api-stored-datasets'));\n                        let activeData = JSON.parse(app[0].getAttribute('data-api-active-datasets'));\n                        for (const key in activeData) {\n                            if (!(key in storedData)) {\n                                storedData[key] = activeData[key];\n                            }\n                        }\n                        app[0].setAttribute('data-api-stored-datasets', JSON.stringify(storedData));\n                    }\n                    app[0].setAttribute('data-api-active-datasets', 'none');\n                    app[0].setAttribute('data-active-sets', 'assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection');\n                    app[0].setAttribute('data-map-available', 'false');\n                    app[0].setAttribute('data-active-section', 'about this property');\n                    app[0].setAttribute('data-app-state', 'loading-screen');\n                })\n            }\n            navToolsWrapper.appendChild(propertyDataBtn);\n\n            const govDataBtn = document.createElement('cod-button');\n            govDataBtn.setAttribute('data-label', '');\n            govDataBtn.setAttribute('data-size', 'lg');\n            govDataBtn.setAttribute('data-img', 'https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/government.png');\n            govDataBtn.setAttribute('data-img-alt', 'government officials');\n            govDataBtn.setAttribute('data-shape', 'square');\n            govDataBtn.setAttribute('data-nav-value', 'government officials');\n            govDataBtn.setAttribute('data-icon', '');\n            if (app[0].getAttribute('data-active-section') == 'government officials') {\n                govDataBtn.setAttribute('data-background-color', 'success');\n                govDataBtn.setAttribute('data-primary', true);\n            } else {\n                govDataBtn.setAttribute('data-background-color', 'secondary');\n                govDataBtn.setAttribute('data-primary', false);\n                govDataBtn.addEventListener('click', (ev) => {\n                    if (app[0].getAttribute('data-api-active-datasets') != 'none') {\n                        let storedData = JSON.parse(app[0].getAttribute('data-api-stored-datasets'));\n                        let activeData = JSON.parse(app[0].getAttribute('data-api-active-datasets'));\n                        for (const key in activeData) {\n                            if (!(key in storedData)) {\n                                storedData[key] = activeData[key];\n                            }\n                        }\n                        app[0].setAttribute('data-api-stored-datasets', JSON.stringify(storedData));\n                    }\n                    app[0].setAttribute('data-api-active-datasets', 'none');\n                    app[0].setAttribute('data-active-sets', 'council,council-members,bop-members,district-managers,business-liaison,district-inspectors,npo');\n                    app[0].setAttribute('data-map-available', 'false');\n                    app[0].setAttribute('data-active-section', 'government officials');\n                    app[0].setAttribute('data-app-state', 'loading-screen');\n                });\n            }\n            navToolsWrapper.appendChild(govDataBtn);\n\n            const zoneDataBtn = document.createElement('cod-button');\n            zoneDataBtn.setAttribute('data-label', '');\n            zoneDataBtn.setAttribute('data-size', 'lg');\n            zoneDataBtn.setAttribute('data-img', 'https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/zone.png');\n            zoneDataBtn.setAttribute('data-img-alt', 'special areas and zones');\n            zoneDataBtn.setAttribute('data-shape', 'square');\n            zoneDataBtn.setAttribute('data-nav-value', 'special areas and zones');\n            zoneDataBtn.setAttribute('data-icon', '');\n            if (app[0].getAttribute('data-active-section') == 'special areas and zones') {\n                zoneDataBtn.setAttribute('data-background-color', 'success');\n                zoneDataBtn.setAttribute('data-primary', true);\n            } else {\n                zoneDataBtn.setAttribute('data-background-color', 'secondary');\n                zoneDataBtn.setAttribute('data-primary', false);\n                zoneDataBtn.addEventListener('click', (ev) => {\n                    if (app[0].getAttribute('data-api-active-datasets') != 'none') {\n                        let storedData = JSON.parse(app[0].getAttribute('data-api-stored-datasets'));\n                        let activeData = JSON.parse(app[0].getAttribute('data-api-active-datasets'));\n                        for (const key in activeData) {\n                            if (!(key in storedData)) {\n                                storedData[key] = activeData[key];\n                            }\n                        }\n                        app[0].setAttribute('data-api-stored-datasets', JSON.stringify(storedData));\n                    }\n                    app[0].setAttribute('data-api-active-datasets', 'none');\n                    app[0].setAttribute('data-active-sets', 'nez,nrsa,historicDistrict');\n                    app[0].setAttribute('data-map-available', 'false');\n                    app[0].setAttribute('data-active-section', 'special areas and zones');\n                    app[0].setAttribute('data-app-state', 'loading-screen');\n                });\n            }\n            navToolsWrapper.appendChild(zoneDataBtn);\n\n            const nearDataBtn = document.createElement('cod-button');\n            nearDataBtn.setAttribute('data-label', '');\n            nearDataBtn.setAttribute('data-size', 'lg');\n            nearDataBtn.setAttribute('data-img', 'https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/nearby.png');\n            nearDataBtn.setAttribute('data-img-alt', 'things nearby');\n            nearDataBtn.setAttribute('data-shape', 'square');\n            nearDataBtn.setAttribute('data-nav-value', 'things nearby');\n            nearDataBtn.setAttribute('data-icon', '');\n            if (app[0].getAttribute('data-active-section') == 'things nearby') {\n                nearDataBtn.setAttribute('data-background-color', 'success');\n                nearDataBtn.setAttribute('data-primary', true);\n            } else {\n                nearDataBtn.setAttribute('data-background-color', 'secondary');\n                nearDataBtn.setAttribute('data-primary', false);\n                nearDataBtn.addEventListener('click', (ev) => {\n                    if (app[0].getAttribute('data-api-active-datasets') != 'none') {\n                        let storedData = JSON.parse(app[0].getAttribute('data-api-stored-datasets'));\n                        let activeData = JSON.parse(app[0].getAttribute('data-api-active-datasets'));\n                        for (const key in activeData) {\n                            if (!(key in storedData)) {\n                                storedData[key] = activeData[key];\n                            }\n                        }\n                        app[0].setAttribute('data-api-stored-datasets', JSON.stringify(storedData));\n                    }\n                    app[0].setAttribute('data-api-active-datasets', 'none');\n                    app[0].setAttribute('data-active-sets', 'schools,demos-data,stabilization-data,improve-det');\n                    app[0].setAttribute('data-active-section', 'things nearby');\n                    app[0].setAttribute('data-map-available', 'true');\n                    app[0].setAttribute('data-app-state', 'loading-screen');\n                });\n            }\n            navToolsWrapper.appendChild(nearDataBtn);\n\n            const printBtn = document.createElement('cod-button');\n            printBtn.setAttribute('data-label', '');\n            printBtn.setAttribute('data-size', 'lg');\n            printBtn.setAttribute('data-img', 'https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/print.png');\n            printBtn.setAttribute('data-img-alt', 'print');\n            printBtn.setAttribute('data-shape', 'square');\n            printBtn.setAttribute('data-nav-value', 'print');\n            printBtn.setAttribute('data-icon', '');\n            if (app[0].getAttribute('data-active-section') == 'print') {\n                printBtn.setAttribute('data-background-color', 'success');\n                printBtn.setAttribute('data-primary', true);\n            } else {\n                printBtn.setAttribute('data-background-color', 'secondary');\n                printBtn.setAttribute('data-primary', false);\n                printBtn.addEventListener('click', (ev) => {\n                    if(ev.target.getAttribute('data-nav-value')){\n                        app[0].setAttribute('data-app-state', 'print');\n                    }\n                });\n            }\n            navToolsWrapper.appendChild(printBtn);\n        }\n\n        shadow.appendChild(navToolsWrapper);\n    }\n\n}\n","'use strict';\nimport Geocoder from './Geocoder';\nimport NavigationTools from './NavigationTools';\ncustomElements.define('app-geocoder', Geocoder);\ncustomElements.define('app-nav-tools', NavigationTools);\nexport default class Display extends HTMLElement {\n\n  constructor() {\n    // Always call super first in constructor\n    super();\n\n    // Create a shadow root\n    const shadow = this.attachShadow({ mode: 'open' });\n\n    shadow.innerHTML = `\n    <cod-offcanvas data-id=\"offcanvasExample\" data-show=\"true\">\n    <cod-offcanvas-header>\n      <h5>Offcanvas</h5>\n    </cod-offcanvas-header>\n    <cod-offcanvas-body>\n      <p>\n        Some text as placeholder. In real life you can have the elements you\n        have chosen. Like, text, images, lists, etc.\n      </p>\n    </cod-offcanvas-body>\n  </cod-offcanvas>\n    `;\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    // console.log(`Display - attribute: ${name}, old: ${oldValue}, new: ${newValue}`);\n    if (newValue == 'data-panel-data') {\n      this.clearDisplay(this);\n    }\n    if (name == 'data-pagination'){\n      this.clearDisplay(this);\n    }\n    this.loadDisplay(this);\n  }\n\n  clearDisplay(display) {\n    const shadow = display.shadowRoot;\n    while (shadow.firstChild) {\n      shadow.removeChild(shadow.firstChild);\n    }\n  }\n\n  formatDate(value) {\n    const month = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n    const tempDate = new Date(value);\n    return `${month[tempDate.getMonth()]} ${tempDate.getDate()}, ${tempDate.getFullYear()}`;\n  }\n\n  printInfo(display) {\n    let divContents = display.buildDataSection(display);\n    let a = window.open('', '', 'height=500, width=500');\n    a.document.write('<html>');\n    a.document.write('<head><style>@media print {.noprint { visibility: hidden;} p.data-block-title{border-bottom: 1px solid;} .data-block-title button { display: none; } body { column-count: 2;} .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; } }</style></head>');\n    a.document.write('<body >');\n    a.document.write(divContents.children[1].innerHTML);\n    a.document.write('</body>');\n    a.document.close();\n    a.print();\n  }\n\n  loadDisplay(display) {\n    const shadow = display.shadowRoot;\n    const displayWrapper = document.createElement('section');\n    const geocoder = document.createElement('app-geocoder');\n    const navTools = document.createElement('app-nav-tools');\n    const app = document.getElementsByTagName('my-home-info');\n    navTools.printInfo = display.printInfo;\n    displayWrapper.id = 'display-wrapper';\n    switch (this.getAttribute('data-display-type')) {\n      case 'active-panel':\n        console.log('loading panel');\n        let data = JSON.parse(this.getAttribute('data-panel-data'));\n        let panel = document.createElement('cod-offcanvas');\n        panel.id = 'd6-map-panel';\n        panel.setAttribute('data-show', 'true');\n        let panelHeader = document.createElement('cod-offcanvas-header');\n        let panelBody = document.createElement('cod-offcanvas-body');\n        \n        panelHeader.innerHTML = `<h5>${data.properties.business_name}`;\n        panelBody.innerHTML = `\n        <p><strong>Address:</strong> ${data.properties.address}</p>\n        <p><strong>Phone:</strong> ${data.properties.business_phone_number}</p>\n        <p><strong>Website:</strong> ${data.properties.business_phone_website}</p>\n        `;\n        panel.appendChild(panelHeader);\n        panel.appendChild(panelBody);\n        displayWrapper.appendChild(panel);\n        shadow.appendChild(displayWrapper);\n        console.log(panel);\n        break;\n\n      case 'active':\n        shadow.appendChild(display.welcomeStyle);\n        displayWrapper.appendChild(geocoder);\n        shadow.appendChild(displayWrapper);\n        break;\n\n      case 'loading':\n        const loader = document.createElement('cod-loader');\n        loader.setAttribute('data-color', 'color-3');\n        displayWrapper.appendChild(loader);\n        shadow.appendChild(displayWrapper);\n        break;\n\n      case 'results':\n        let parcelData = JSON.parse(app[0].getAttribute('data-parcel-id'));\n        shadow.appendChild(display.resultsStyle);\n        let resultsContainer = document.createElement('section');\n        resultsContainer.className = 'results-container';\n        resultsContainer.appendChild(navTools);\n        let dataSetResults = document.createElement('article');\n        dataSetResults.className = 'dataset-results';\n        let addressBox = document.createElement('article');\n        addressBox.className = 'result-address';\n        addressBox.innerText = parcelData.address;\n        dataSetResults.appendChild(addressBox);\n        let results = display.buildDataSection(display);\n        dataSetResults.appendChild(results);\n        resultsContainer.appendChild(dataSetResults);\n        displayWrapper.appendChild(resultsContainer);\n        shadow.appendChild(displayWrapper);\n        break;\n\n      case 'error':\n        let errorContainer = document.createElement('section');\n        shadow.appendChild(display.resultsStyle);\n        errorContainer.className = 'results-container';\n        errorContainer.appendChild(navTools);\n        let errorBox = document.createElement('article');\n        errorBox.className = 'error-result';\n        errorBox.innerHTML = `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"70\" viewBox=\"0 0 100 68\">\n          <g id=\"large\">\n            <path fill=\"none\" stroke=\"#F44\" d=\"M55.8 38.5l6.2-1.2c0-1.8-.1-3.5-.4-5.3l-6.3-.2c-.5-2-1.2-4-2.1-6l4.8-4c-.9-1.6-1.9-3-3-4.4l-5.6 3c-1.3-1.6-3-3-4.7-4.1l2-6A30 30 0 0 0 42 8l-3.3 5.4c-2-.7-4.2-1-6.2-1.2L31.3 6c-1.8 0-3.5.1-5.3.4l-.2 6.3c-2 .5-4 1.2-6 2.1l-4-4.8c-1.6.9-3 1.9-4.4 3l3 5.6c-1.6 1.3-3 3-4.1 4.7l-6-2A32.5 32.5 0 0 0 2 26l5.4 3.3c-.7 2-1 4.2-1.2 6.2L0 36.7c0 1.8.1 3.5.4 5.3l6.3.2c.5 2 1.2 4 2.1 6l-4.8 4c.9 1.6 1.9 3 3 4.4l5.6-3c1.4 1.6 3 3 4.7 4.1l-2 6A30.5 30.5 0 0 0 20 66l3.4-5.4c2 .7 4 1 6.1 1.2l1.2 6.2c1.8 0 3.5-.1 5.3-.4l.2-6.3c2-.5 4-1.2 6-2.1l4 4.8c1.6-.9 3-1.9 4.4-3l-3-5.6c1.6-1.3 3-3 4.1-4.7l6 2A32 32 0 0 0 60 48l-5.4-3.3c.7-2 1-4.2 1.2-6.2zm-13.5 4a12.5 12.5 0 1 1-22.6-11 12.5 12.5 0 0 1 22.6 11z\"/>\n            <animateTransform attributeName=\"transform\" begin=\"0s\" dur=\"3s\" from=\"0 31 37\" repeatCount=\"indefinite\" to=\"360 31 37\" type=\"rotate\"/>\n          </g>\n          <g id=\"small\">\n            <path fill=\"none\" stroke=\"#F44\" d=\"M93 19.3l6-3c-.4-1.6-1-3.2-1.7-4.8L90.8 13c-.9-1.4-2-2.7-3.4-3.8l2.1-6.3A21.8 21.8 0 0 0 85 .7l-3.6 5.5c-1.7-.4-3.4-.5-5.1-.3l-3-5.9c-1.6.4-3.2 1-4.7 1.7L70 8c-1.5 1-2.8 2-3.9 3.5L60 9.4a20.6 20.6 0 0 0-2.2 4.6l5.5 3.6a15 15 0 0 0-.3 5.1l-5.9 3c.4 1.6 1 3.2 1.7 4.7L65 29c1 1.5 2.1 2.8 3.5 3.9l-2.1 6.3a21 21 0 0 0 4.5 2.2l3.6-5.6c1.7.4 3.5.5 5.2.3l2.9 5.9c1.6-.4 3.2-1 4.8-1.7L86 34c1.4-1 2.7-2.1 3.8-3.5l6.3 2.1a21.5 21.5 0 0 0 2.2-4.5l-5.6-3.6c.4-1.7.5-3.5.3-5.1zM84.5 24a7 7 0 1 1-12.8-6.2 7 7 0 0 1 12.8 6.2z\"/>\n            <animateTransform attributeName=\"transform\" begin=\"0s\" dur=\"2s\" from=\"0 78 21\" repeatCount=\"indefinite\" to=\"-360 78 21\" type=\"rotate\"/>\n          </g>\n        </svg>\n        <h3>No Information found on this address. Please close and try again.</h3>\n        `;\n        errorContainer.appendChild(errorBox);\n        displayWrapper.appendChild(errorContainer);\n        shadow.appendChild(displayWrapper);\n        break;\n\n      case 'print':\n        let printParcelData = JSON.parse(app[0].getAttribute('data-parcel-id'));\n        shadow.appendChild(display.resultsStyle);\n        let printResultsContainer = document.createElement('section');\n        printResultsContainer.className = 'results-container';\n        printResultsContainer.appendChild(navTools);\n        let printDataSetResults = document.createElement('article');\n        printDataSetResults.className = 'dataset-results';\n        let printAddressBox = document.createElement('article');\n        printAddressBox.className = 'result-address';\n        printAddressBox.innerText = printParcelData.address;\n        printDataSetResults.appendChild(printAddressBox);\n        let printResults = display.buildDataSection(display);\n        printDataSetResults.appendChild(printResults);\n        printResultsContainer.appendChild(printDataSetResults);\n        displayWrapper.appendChild(printResultsContainer);\n        shadow.appendChild(displayWrapper);\n        display.printInfo(display);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n}\n","'use strict';\r\nconst turf = require('@turf/turf');\r\nconst arcGIS = require('terraformer-arcgis-parser');\r\n\r\nexport default class DataLoader extends HTMLElement {\r\n  static get observedAttributes() {\r\n    return ['data-loader-state', 'data-parcel-id'];\r\n  }\r\n\r\n  constructor() {\r\n    // Always call super first in constructor\r\n    super();\r\n\r\n    // Create a shadow root\r\n    const shadow = this.attachShadow({ mode: 'open' });\r\n\r\n    // Create result section\r\n    const loaderWrapper = document.createElement('section');\r\n    loaderWrapper.id = 'loader-wrapper';\r\n    shadow.appendChild(loaderWrapper);\r\n  }\r\n\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    const shadow = this.shadowRoot;\r\n    // console.log(`Loader - attribute: ${name}, old: ${oldValue}, new: ${newValue}`);\r\n    switch (name) {\r\n      case 'data-loader-state':\r\n        this.clearLoader(this);\r\n        this.loadLoader(this);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  getDataSets(loader) {\r\n    const app = document.getElementsByTagName('my-home-info');\r\n    const dataSets = app[0].getAttribute('data-active-sets').split(',');\r\n    const parcelData = JSON.parse(app[0].getAttribute('data-parcel-id'));\r\n    let dataList = [];\r\n\r\n    let assessorsData = new Promise((resolve, reject) => {\r\n      if (parcelData.attributes.parcel_id == 'CONDO BUILDING') {\r\n        resolve({ \"id\": \"assessors-data\", \"data\": null });\r\n      } else {\r\n        let url = \"https://apis.detroitmi.gov/assessments/parcel/\" + parcelData.attributes.parcel_id + \"/\";\r\n        return fetch(url)\r\n          .then((resp) => resp.json()) // Transform the data into json\r\n          .then(function (data) {\r\n            resolve({ \"id\": \"assessors-data\", \"data\": data });\r\n          }).catch(err => {\r\n            // console.log(err);\r\n          });\r\n      }\r\n    });\r\n\r\n    let neighborhoods = new Promise((resolve, reject) => {\r\n      resolve({ \"id\": \"neighborhood\", \"data\": parcelData });\r\n    });\r\n\r\n    let council = new Promise((resolve, reject) => {\r\n      return resolve({ \"id\": \"council\", \"data\": parcelData });\r\n    });\r\n    let bopMembers = new Promise((resolve, reject) => {\r\n      let url = \"/rest/bop?_format=json\";\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"bop-members\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let districtManagers = new Promise((resolve, reject) => {\r\n      let url = \"/rest/district-managers?_format=json\";\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"district-managers\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let districtInspectors = new Promise((resolve, reject) => {\r\n      let url = \"/rest/district-inspectors?_format=json\";\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"district-inspectors\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let councilMembers = new Promise((resolve, reject) => {\r\n      let url = \"/rest/council-members?_format=json\";\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"council-members\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let DWSDBackupProtection = new Promise((resolve, reject) => {\r\n      resolve({ \"id\": \"DWSDBackupProtection\", \"data\": parcelData });\r\n    });\r\n    let HRDFlooding = new Promise((resolve, reject) => {\r\n      resolve({ \"id\": \"HRDFlooding\", \"data\": parcelData });\r\n    });\r\n    let nrsa = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/NRSA_2020/FeatureServer/0/query?where=&objectIds=&time=&geometry=${parcelData.location.x}%2C${parcelData.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"nrsa\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let nezHomestead = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/NEZHOMESTEAD2021/FeatureServer/0/query?where=&objectIds=&time=&geometry=${parcelData.location.x}%2C${parcelData.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"nez\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let permitData = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/BuildingPermits/FeatureServer/0/query?where=parcel_id+%3D+%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=3&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"permit-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let rentalData = new Promise((resolve, reject) => {\r\n      let url;\r\n      if (parcelData.attributes.parcel_id != 'CONDO BUILDING') {\r\n        url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=parcel_id+%3D+%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`;\r\n      } else {\r\n        url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=&objectIds=&time=&geometry=${parcelData.location.x}%2C+${parcelData.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json`;\r\n      }\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"rental-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let rentalCertData = new Promise((resolve, reject) => {\r\n      let url;\r\n      if (parcelData.attributes.parcel_id != 'CONDO BUILDING') {\r\n        url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=parcel_id%3D%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json`;\r\n      } else {\r\n        url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=&objectIds=&time=&geometry=${parcelData.location.x}%2C+${parcelData.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json`;\r\n      }\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"rental-cert-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let blightData = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Blight_Violations_(DAH)/FeatureServer/0/query?where=parcelno%3D%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=violation_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"blight-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let salesHistoryData = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Property_Sales/FeatureServer/0/query?where=PARCEL_NO%3D%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=SALE_DATE&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"sales-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let demosData = new Promise((resolve, reject) => {\r\n      let point = turf.point([parcelData.location.x, parcelData.location.y]);\r\n      let buffer = turf.buffer(point, 2, { units: 'miles' });\r\n      let simplePolygon = turf.simplify(buffer.geometry, { tolerance: 0.005, highQuality: false });\r\n      let arcsimplePolygon = arcGIS.convert(simplePolygon);\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(arcsimplePolygon))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          data.features.sort(loader.sortFeaturesByDistanceTo(point));\r\n          resolve({ \"id\": \"demos-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let stabilizationData = new Promise((resolve, reject) => {\r\n      let point = turf.point([parcelData.location.x, parcelData.location.y]);\r\n      let buffer = turf.buffer(point, 2, { units: 'miles' });\r\n      let simplePolygon = turf.simplify(buffer.geometry, { tolerance: 0.005, highQuality: false });\r\n      let arcsimplePolygon = arcGIS.convert(simplePolygon);\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Contracted_Stabilizations/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(arcsimplePolygon))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          data.features.sort(loader.sortFeaturesByDistanceTo(point));\r\n          resolve({ \"id\": \"stabilization-data\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let demoStatus = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=parcel_id+%3D+%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=demolish_by_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"demo-status\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let schools = new Promise((resolve, reject) => {\r\n      let point = turf.point([parcelData.location.x, parcelData.location.y]);\r\n      let buffer = turf.buffer(point, 2, { units: 'miles' });\r\n      let simplePolygon = turf.simplify(buffer.geometry, { tolerance: 0.005, highQuality: false });\r\n      let arcsimplePolygon = arcGIS.convert(simplePolygon);\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/2018_2019_Schools_(EEM)/FeatureServer/0/query?where=&objectIds=&time=&geometry=${encodeURI(JSON.stringify(arcsimplePolygon))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          data.features.sort(loader.sortFeaturesByDistanceTo(point));\r\n          resolve({ \"id\": \"schools\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let npo = new Promise((resolve, reject) => {\r\n      let url = `https://opengis.detroitmi.gov/opengis/rest/services/PublicSafety/NeighborhoodPoliceOfficers/FeatureServer/0/query?where=&objectIds=&time=&geometry=${parcelData.location.x}%2C${parcelData.location.y}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=1&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"npo\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let improveDet = new Promise((resolve, reject) => {\r\n      let point = turf.point([parcelData.location.x, parcelData.location.y]);\r\n      let buffer = turf.buffer(point, 300, { units: 'meters' });\r\n      let simplePolygon = turf.simplify(buffer.geometry, { tolerance: 0.005, highQuality: false });\r\n      let arcsimplePolygon = arcGIS.convert(simplePolygon);\r\n      let url = `https://opengis.detroitmi.gov/opengis/rest/services/DoIT/ImproveDetroitIssues/FeatureServer/0/query?where=status+%3C%3E+%27Closed%27+and+status+%3C%3E+%27Archived%27&objectIds=&time=&geometry=${encodeURI(JSON.stringify(arcsimplePolygon))}&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"improve-det\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let recycling = new Promise((resolve, reject) => {\r\n      let url = \"https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/WasteCollectionAreas/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry=\" + parcelData.location.x + \"%2C+\" + parcelData.location.y + \"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json\";\r\n      fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          let today = new Date();\r\n          let todaysMonth = today.getMonth() + 1;\r\n          let todaysYear = today.getFullYear();\r\n          let url = `https://apis.detroitmi.gov/waste_schedule/details/${data.features[0].attributes.FID}/year/${todaysYear}/month/${todaysMonth}/`;\r\n          return fetch(url)\r\n            .then((resp) => resp.json()) // Transform the data into json\r\n            .then(function (data) {\r\n              resolve({ \"id\": \"recycling\", \"data\": data });\r\n            });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let historicDistrict = new Promise((resolve, reject) => {\r\n      let url = \"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/Detroit_Local_Historic_Districts/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry=\" + parcelData.location.x + \"%2C+\" + parcelData.location.y + \"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json\";\r\n      fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"historicDistrict\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    let fireEscrow = new Promise((resolve, reject) => {\r\n      let url = `https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/fie_properties_final/FeatureServer/0/query?where=parcel_id%3D%27${parcelData.attributes.parcel_id}%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnHiddenFields=false&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=`;\r\n      return fetch(url)\r\n        .then((resp) => resp.json()) // Transform the data into json\r\n        .then(function (data) {\r\n          resolve({ \"id\": \"fireEscrow\", \"data\": data });\r\n        }).catch(err => {\r\n          // console.log(err);\r\n        });\r\n    });\r\n    dataSets.forEach(f => {\r\n      switch (f) {\r\n        case 'council':\r\n          dataList.push(council);\r\n          break;\r\n\r\n        case 'neighborhood':\r\n          dataList.push(neighborhoods);\r\n          break;\r\n\r\n        case 'assessors-data':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            if (parcelData.attributes.parcel_id == 'CONDO BUILDING') {\r\n            } else {\r\n              dataList.push(assessorsData);\r\n            }\r\n          }\r\n          break;\r\n\r\n        case 'permit-data':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            dataList.push(permitData);\r\n          }\r\n          break;\r\n\r\n        case 'blight-data':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            dataList.push(blightData);\r\n          }\r\n          break;\r\n\r\n        case 'salesHistoryData':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            dataList.push(salesHistoryData);\r\n          }\r\n          break;\r\n\r\n        case 'fireEscrow':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            dataList.push(fireEscrow);\r\n          }\r\n          break;\r\n\r\n        case 'nez':\r\n          dataList.push(nezHomestead);\r\n          break;\r\n\r\n        case 'nrsa':\r\n          dataList.push(nrsa);\r\n          break;\r\n\r\n        case 'npo':\r\n          dataList.push(npo);\r\n          break;\r\n\r\n        case 'improve-det':\r\n          dataList.push(improveDet);\r\n          break;\r\n\r\n        case 'recycling':\r\n          dataList.push(recycling);\r\n          break;\r\n\r\n        case 'rental-data':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            dataList.push(rentalData);\r\n          }\r\n          break;\r\n\r\n        case 'rental-cert':\r\n          dataList.push(rentalCertData);\r\n          break;\r\n\r\n        case 'demo-status':\r\n          if (parcelData.attributes.parcel_id != null && parcelData.attributes.parcel_id != '') {\r\n            dataList.push(demoStatus);\r\n          }\r\n          break;\r\n\r\n        case 'demos-data':\r\n          dataList.push(demosData);\r\n          break;\r\n\r\n        case 'stabilization-data':\r\n          dataList.push(stabilizationData);\r\n          break;\r\n\r\n        case 'schools':\r\n          dataList.push(schools);\r\n          break;\r\n\r\n        case 'historicDistrict':\r\n          dataList.push(historicDistrict);\r\n          break;\r\n\r\n        case 'district-managers':\r\n          dataList.push(districtManagers);\r\n          break;\r\n\r\n        case 'district-inspectors':\r\n          dataList.push(districtInspectors);\r\n          break;\r\n\r\n        case 'council-members':\r\n          dataList.push(councilMembers);\r\n          break;\r\n\r\n        case 'bop-members':\r\n          dataList.push(bopMembers);\r\n          break;\r\n\r\n        case 'HRDFlooding':\r\n          console.log('pushing HRDFlooding');\r\n          dataList.push(HRDFlooding);\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    });\r\n    return dataList;\r\n  }\r\n\r\n  buildCouncilData(data) {\r\n    let councilData = {\r\n      council: {\r\n        district: `District ${data.council.data.attributes.council_district}`,\r\n        districtURL: null,\r\n        name: null,\r\n        url: null,\r\n        phone: null\r\n      },\r\n      bop: {\r\n        district: `District ${data.council.data.attributes.council_district}`,\r\n        url: null,\r\n        name: null,\r\n        url: null,\r\n        phone: null,\r\n        email: null\r\n      },\r\n      dmanager: {\r\n        name: null,\r\n        url: `/departments/department-of-neighborhoods/district-${data.council.data.attributes.council_district}#block-views-block-contacts-special-block-1`,\r\n        phone: null\r\n      },\r\n      ddmanager: {\r\n        name: null,\r\n        url: `/departments/department-of-neighborhoods/district-${data.council.data.attributes.council_district}#block-views-block-contacts-special-block-1`,\r\n        phone: null\r\n      },\r\n      bliaision: {\r\n        name: null,\r\n        email: null\r\n      },\r\n      enforcement: {\r\n        name: null,\r\n        phone: null\r\n      }\r\n    };\r\n    switch (data.council.data.attributes.council_district.toString()) {\r\n      case \"1\":\r\n        councilData.council.districtURL = `/taxonomy/term/1276`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1276') {\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1276`;\r\n            councilData.council.phone = item.field_phone;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 1')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4331`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 1 Manager')) {\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 1 Deputy Manager')) {\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 1 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 1')) {\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = item.field_telephone;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case \"2\":\r\n        councilData.council.districtURL = `/taxonomy/term/1476`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1476') {\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1476`;\r\n            councilData.council.phone = item.field_phone;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 2')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4336`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 2 Manager')) {\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 2 Deputy Manager')) {\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 2 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 2')) {\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = item.field_telephone;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case \"3\":\r\n        councilData.council.districtURL = `/taxonomy/term/1481`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1481') {\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1481`;\r\n            councilData.council.phone = item.field_phone;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 3')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4341`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 3 Manager')) {\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 3 Deputy Manager')) {\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 3 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 3')) {\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = item.field_telephone;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case \"4\":\r\n        councilData.council.districtURL = `/taxonomy/term/1486`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1486') {\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1486`;\r\n            councilData.council.phone = item.field_phone;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 4')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4346`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 4 Manager')) {\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 4 Deputy Manager')) {\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 4 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 4')) {\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = item.field_telephone;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case \"5\":\r\n        councilData.council.districtURL = `/taxonomy/term/1346`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1346') {\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1346`;\r\n            councilData.council.phone = item.field_phone;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 5')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4351`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 5 Manager')) {\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 5 Deputy Manager')) {\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 5 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 5')) {\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = item.field_telephone;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case \"6\":\r\n        councilData.council.districtURL = `/taxonomy/term/1491`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1491') {\r\n            let cleanPhone = item.field_phone.replace('Office: ', '');\r\n            cleanPhone = cleanPhone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1491`;\r\n            councilData.council.phone = `<a href=\"tel:${cleanPhone}\">${item.field_phone}</a>`;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 6')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4321`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 6 Manager')) {\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n          }\r\n          if (item.field_contact_position.includes('District 6 Deputy Manager')) {\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n          }\r\n          if (item.field_contact_position.includes('District 6 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 6')) {\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n          }\r\n        });\r\n        break;\r\n\r\n      case \"7\":\r\n        councilData.council.districtURL = `/taxonomy/term/1511`;\r\n        data['council-members'].data.forEach((item) => {\r\n          if (item.tid == '1511') {\r\n            councilData.council.name = item.field_organization_head_name;\r\n            councilData.council.url = `/taxonomy/term/1511`;\r\n            councilData.council.phone = item.field_phone;\r\n          }\r\n        });\r\n        data['bop-members'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 7')) {\r\n            councilData.bop.name = item.title;\r\n            councilData.bop.url = `/taxonomy/term/4356`;\r\n            let cleanPhone = item.field_telephone.replace(/ /g, '-');\r\n            cleanPhone = cleanPhone.replace(/[()]/g, '');\r\n            councilData.bop.phone = `<a href=\"tel:${cleanPhone}\">${item.field_telephone}</a>`;\r\n            councilData.bop.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-managers'].data.forEach((item) => {\r\n          if (item.field_contact_position.includes('District 7 Manager')) {\r\n            councilData.dmanager.name = item.title;\r\n            councilData.dmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 7 Deputy Manager')) {\r\n            councilData.ddmanager.name = item.title;\r\n            councilData.ddmanager.phone = item.field_telephone;\r\n          }\r\n          if (item.field_contact_position.includes('District 7 Business Liaison')) {\r\n            councilData.bliaision.name = item.title;\r\n            councilData.bliaision.email = item.field_email_address;\r\n          }\r\n        });\r\n        data['district-inspectors'].data.forEach((item) => {\r\n          if (item.field_responsibilities.includes('District 7')) {\r\n            councilData.enforcement.name = item.title;\r\n            councilData.enforcement.phone = item.field_telephone;\r\n          }\r\n        });\r\n        break;\r\n\r\n      default:\r\n        // console.log('not inside city');\r\n        break;\r\n    }\r\n    return councilData;\r\n  }\r\n\r\n  sortFeaturesByDistanceTo(target){\r\n    return function(a, b) {\r\n      var options = {units: 'radians'}; // using radians to forgo conversion to another unit\r\n      return turf.distance(target, a, options) - turf.distance(target, b, options);\r\n    }\r\n  }\r\n\r\n  getData(loader) {\r\n    const app = document.getElementsByTagName('my-home-info');\r\n    const activeDataSets = app[0].getAttribute('data-active-sets').split(',');\r\n    const parcelData = JSON.parse(app[0].getAttribute('data-parcel-id'));\r\n    const storedData = JSON.parse(app[0].getAttribute('data-api-stored-datasets'));\r\n    let dataAlreadyLoaded = false;\r\n    for (let key in storedData) {\r\n      if (activeDataSets.includes(key)) {\r\n        dataAlreadyLoaded = true;\r\n      }\r\n    }\r\n    if (dataAlreadyLoaded) {\r\n      let dataSets = {};\r\n      activeDataSets.forEach(data => {\r\n        dataSets[data] = storedData[data];\r\n      });\r\n      app[0].setAttribute('data-api-active-datasets', JSON.stringify(dataSets));\r\n      app[0].setAttribute('data-app-state', 'results');\r\n    } else {\r\n      let dataList = loader.getDataSets(loader);\r\n      Promise.all(dataList).then(values => {\r\n        console.log(values);\r\n        let dataSets = {};\r\n        for (let key in values) {\r\n          if (values[key] != null) {\r\n            dataSets[values[key].id] = values[key];\r\n          } else {\r\n            initialLoadChecker = false;\r\n          }\r\n        }\r\n        if (activeDataSets.includes('council')) {\r\n          let councilData = loader.buildCouncilData(dataSets);\r\n          dataSets['council-members'] = { id: 'council-members', data: councilData.council };\r\n          dataSets['bop-members'] = { id: 'bop-members', data: councilData.bop };\r\n          let dManagers = { manager: councilData.dmanager, deputy: councilData.ddmanager }\r\n          dataSets['district-managers'] = { id: 'district-managers', data: dManagers };\r\n          dataSets['business-liaison'] = { id: 'business-liaison', data: councilData.bliaision };\r\n          dataSets['district-inspectors'] = { id: 'district-inspectors', data: councilData.enforcement };\r\n        }\r\n        if (activeDataSets.includes('DWSDBackupProtection')) {\r\n          try {\r\n            if (!dataSets.DWSDBackupProtection) {\r\n              dataSets.DWSDBackupProtection = { id: 'DWSDBackupProtection', data: dataSets['neighborhood'].data };\r\n            }\r\n          } catch (error) {\r\n            // console.log(error);\r\n          }\r\n        }\r\n        app[0].setAttribute('data-api-active-datasets', JSON.stringify(dataSets));\r\n        app[0].setAttribute('data-app-state', 'results');\r\n      }).catch(reason => {\r\n        // console.log(reason);\r\n      });\r\n    }\r\n  }\r\n\r\n  clearLoader(loader) {\r\n    const shadow = loader.shadowRoot;\r\n    while (shadow.firstChild) {\r\n      shadow.removeChild(shadow.firstChild);\r\n    }\r\n  }\r\n\r\n  loadLoader(loader) {\r\n    const shadow = loader.shadowRoot;\r\n    const loaderWrapper = document.createElement('section');\r\n    loaderWrapper.id = 'loader-wrapper';\r\n    switch (loader.getAttribute('data-loader-state')) {\r\n      case 'active':\r\n        loader.getData(loader);\r\n        const textWelcome = document.createElement('p');\r\n        textWelcome.innerText = 'Loading DATA';\r\n        loaderWrapper.appendChild(textWelcome);\r\n        shadow.appendChild(loaderWrapper);\r\n        break;\r\n\r\n      case 'finished':\r\n        const text = document.createElement('p');\r\n        text.innerText = 'Data loaded';\r\n        loaderWrapper.appendChild(text);\r\n        shadow.appendChild(loaderWrapper);\r\n        break;\r\n\r\n      default:\r\n\r\n        break;\r\n    }\r\n  }\r\n}\r\n","'use strict';\nimport Display from './Display';\nimport DataLoader from './DataLoader';\nimport testData from './test-data.json';\n// import Map from './Map';\ncustomElements.define('app-display', Display);\ncustomElements.define('app-data-loader', DataLoader);\n// customElements.define('app-map', Map);\n\nexport default class D6BusinessMap extends HTMLElement {\n    static get observedAttributes() {\n        return ['data-app-state', 'data-parcel-id', 'data-map-state'];\n    }\n\n    constructor() {\n        // Always call super first in constructor\n        super();\n\n        // Create a shadow root\n        const shadow = this.attachShadow({ mode: 'open' });\n\n        // Create result section\n        const app = document.getElementsByTagName('d6-business-map');\n        let tempState = app[0].getAttribute('data-app-state');\n\n        this.testData = testData;\n\n        this.appWrapper = document.createElement('section');\n        this.appWrapper.id = 'app-wrapper';\n\n        shadow.appendChild(this.appWrapper);\n\n        // create panel component\n        this.panel = document.createElement('cod-offcanvas');\n        this.panel.id = 'd6-map-panel';\n        this.panelHeader = document.createElement('cod-offcanvas-header');\n        this.panelTitle = document.createElement('h5');\n        this.panelTitle.innerText = 'Test Title';\n        this.panelHeader.appendChild(this.panelTitle);\n\n        this.panelBody = document.createElement('cod-offcanvas-body');\n        this.panelContent = document.createElement('article');\n        this.panelContent.innerHTML = `\n        <p>\n        Some text as placeholder. In real life you can have the elements you\n        have chosen. Like, text, images, lists, etc.\n      </p>\n        `;\n        this.panelBody.appendChild(this.panelContent);\n\n        this.panel.appendChild(this.panelHeader);\n        this.panel.appendChild(this.panelBody);\n        this.appWrapper.appendChild(this.panel);\n\n        // Create map component\n        this.map = document.createElement('cod-map');\n        this.map.id = 'd6-map';\n        this.map.setAttribute('data-parent-component', 'd6-business-map');\n        this.map.setAttribute('data-map-mode', 'map-panel');\n        this.map.setAttribute('data-map-active-data', this.getAttribute('data-map-active-data'));\n        this.map.setAttribute('data-map-data', JSON.stringify(this.testData));\n        this. map.setAttribute('data-location', this.getAttribute('data-location'));\n        this.map.setAttribute('data-map-state', 'init');\n        this.appWrapper.appendChild(this.map);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        console.log(`App - attribute: ${name}, old: ${oldValue}, new: ${newValue}`);\n        this.loadApp(this);\n    }\n\n    clearApp(app) {\n        console.log(app);\n        const shadow = app.shadowRoot;\n        while (shadow.firstChild) {\n            shadow.removeChild(shadow.firstChild);\n        }\n    }\n\n    clearPanel(app) {\n\n    }\n\n    loadApp(app) {\n        console.log(app.getAttribute('data-app-state'));\n        const shadow = app.shadowRoot;\n        const appWrapper = document.createElement('div');\n        appWrapper.id = 'app-wrapper';\n        const dataLoader = document.createElement('app-data-loader');\n        switch (app.getAttribute('data-app-state')) {\n            case 'active-panel':\n                let tempData = JSON.parse(this.getAttribute('data-panel-data'));\n                this.panelTitle.innerText = tempData.properties.business_name;\n                this.panelContent.innerHTML = `\n                    <p><strong>Address:</strong> ${tempData.properties.street_number} ${tempData.properties.street_name}\n                    <p><cod-icon data-icon=\"newspaper\" data-size=\"small\"></cod-icon> Information</p>\n                    <p><cod-icon data-icon=\"house\" data-size=\"small\"></cod-icon> Home services<p>\n                    <p><cod-icon data-icon=\"calendar\" data-size=\"small\"></cod-icon> Services</p>\n                `;\n                this.panel.setAttribute('data-show', 'true');\n                break;\n\n            case 'error':\n                display.setAttribute('data-display-type', 'error');\n                appWrapper.appendChild(display);\n                break;\n\n            case 'print':\n                display.setAttribute('data-display-type', 'print');\n                appWrapper.appendChild(display);\n                break;\n\n            default:\n                break;\n        }\n        if (shadow.firstChild == null) {\n            shadow.appendChild(appWrapper);\n        }\n    }\n}\n","import D6BusinessMap from './components/D6BusinessMap';\ncustomElements.define('d6-business-map', D6BusinessMap);"],"names":["Geocoder","HTMLElement","observedAttributes","constructor","super","this","form","parcelStatus","user","styles","document","createElement","textContent","shadow","attachShadow","mode","appendChild","geocoderWraper","id","label","style","fontFamily","fontWeight","input","list","icon","addEventListener","ev","submit","className","app","getElementsByTagName","innerText","getAttribute","error","setAttribute","type","placeholder","inputChange","supplementGeocoder","address","geocoder","tempAddr","split","newTempAddr","size","length","forEach","item","index","url","concat","fetch","then","resp","json","data","candidates","sugg","attributes","parcel_id","value","onclick","selectSuggestion","childNodes","location","x","y","city","features","parcel","checkParcelValid","needGeocode","clearSuggestions","JSON","stringify","selection","target","tagName","parentNode","key","undefined","firstChild","removeChild","cleanAddress","params","geometry","request","Request","access_token","encodeURIComponent","method","body","headers","Headers","cache","res","test","preventDefault","NavigationTools","navToolsStyle","loadNavTools","clearDisplay","display","shadowRoot","navTools","appStatus","appMode","initialSets","initalMapStatus","navToolsWrapper","clearResultsBtn","propertyDataBtn","storedData","parse","activeData","govDataBtn","zoneDataBtn","nearDataBtn","printBtn","customElements","define","Display","innerHTML","attributeChangedCallback","name","oldValue","newValue","loadDisplay","formatDate","tempDate","Date","getMonth","getDate","getFullYear","printInfo","divContents","buildDataSection","a","window","open","write","children","close","print","displayWrapper","console","log","panel","panelHeader","panelBody","properties","business_name","business_phone_number","business_phone_website","welcomeStyle","loader","parcelData","resultsStyle","resultsContainer","dataSetResults","addressBox","results","errorContainer","errorBox","printParcelData","printResultsContainer","printDataSetResults","printAddressBox","printResults","turf","require","arcGIS","DataLoader","loaderWrapper","clearLoader","loadLoader","getDataSets","dataSets","dataList","assessorsData","Promise","resolve","reject","catch","err","neighborhoods","council","bopMembers","districtManagers","districtInspectors","councilMembers","HRDFlooding","nrsa","nezHomestead","permitData","rentalData","rentalCertData","blightData","salesHistoryData","demosData","point","buffer","units","simplePolygon","simplify","tolerance","highQuality","arcsimplePolygon","convert","encodeURI","sort","sortFeaturesByDistanceTo","stabilizationData","demoStatus","schools","npo","improveDet","recycling","today","todaysMonth","todaysYear","FID","historicDistrict","fireEscrow","f","push","buildCouncilData","councilData","district","council_district","districtURL","phone","bop","email","dmanager","ddmanager","bliaision","enforcement","toString","tid","field_organization_head_name","field_phone","field_responsibilities","includes","title","cleanPhone","field_telephone","replace","field_email_address","field_contact_position","b","options","distance","getData","activeDataSets","dataAlreadyLoaded","all","values","initialLoadChecker","dManagers","manager","deputy","DWSDBackupProtection","reason","textWelcome","text","D6BusinessMap","testData","appWrapper","panelTitle","panelContent","map","loadApp","clearApp","clearPanel","tempData","street_number","street_name"],"sourceRoot":""}