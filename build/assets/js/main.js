!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="76bf9b51-5c3d-4f2d-9151-681bad99bc35",e._sentryDebugIdIdentifier="sentry-dbid-76bf9b51-5c3d-4f2d-9151-681bad99bc35")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"478cdf9bed2baaf3ad4b080958772f99a233f4e3"},(self.webpackChunkd6_business_directory=self.webpackChunkd6_business_directory||[]).push([[590],{596:(e,t,a)=>{class r extends HTMLElement{static get observedAttributes(){return["form","parcelStatus","user"]}constructor(){super(),this.form=null,this.parcelStatus="Invalid",this.user=null,this.styles=document.createElement("style"),this.styles.textContent="\n            @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;700&display=swap')\n            #geocoder {width: 100%}\n            input {width: calc(100% - 2em); padding: 1em; border:.1em solid #e6e6e6; font-size: 1em;}\n        ";const e=this.attachShadow({mode:"open"});e.appendChild(this.styles);const t=document.createElement("article");t.id="geocoder";let a=document.createElement("form"),r=document.createElement("label");r.style.fontFamily="Montserrat, sans-serif",r.style.fontWeight="bold";let i=document.createElement("input"),s=(document.createElement("ul"),document.createElement("datalist")),n=document.createElement("i");a.addEventListener("submit",(e=>{this.submit(e,this)})),n.className="fas fa-map-marker-alt";const o=document.getElementsByTagName("my-home-info");r.innerText="Property Address:";try{o[0].getAttribute("data-geocoder-label")&&""!=o[0].getAttribute("data-geocoder-label")&&(r.innerText=o[0].getAttribute("data-geocoder-label"))}catch(l){}r.setAttribute("for","geocoder-input"),i.type="text",i.setAttribute("list","addresses-list"),i.placeholder="Enter address",i.setAttribute("id","geocoder-input"),i.setAttribute("autocomplete","off"),i.addEventListener("keyup",(e=>{this.inputChange(e,this)})),s.setAttribute("id","addresses-list"),a.appendChild(r),a.appendChild(i),a.appendChild(n),a.appendChild(s),this.form=a,t.appendChild(a),e.appendChild(t)}supplementGeocoder(e,t,a){const r=document.getElementsByTagName("my-home-info");let i=e.split(",");i=i[0],i=i.split(" ");let s="",n=i.length;i.forEach((function(e,t){s+=e,t<n&&t+1!==n&&(s+="+")}));let o="https://opengis.detroitmi.gov/opengis/rest/services/BaseUnits/BaseUnitGeocoder/GeocodeServer/findAddressCandidates?Address=&Address2=&Address3=&Neighborhood=&City=&Subregion=&Region=&Postal=&PostalExt=&CountryCode=&SingleLine=".concat(s,"&outFields=*&maxLocations=&matchOutOfRange=true&langCode=&locationType=&sourceCountry=&category=&location=&distance=&searchExtent=&outSR=&magicKey=&f=json");try{fetch(o).then((e=>e.json())).then((function(i){if("suggestions"===a)i.candidates.forEach((e=>{let a=document.createElement("option");""===e.attributes.parcel_id?(a.value=e.address,a.setAttribute("data-parsel","no-parcel")):(a.value="".concat(e.address," RECOMMENDED"),a.setAttribute("data-parsel",e.attributes.parcel_id)),a.onclick=e=>{t.selectSuggestion(e,t)},t.form.childNodes[3].appendChild(a)}));else if(i.candidates.length){let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/City_of_Detroit_Boundary/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(i.candidates[0].location.x,"%2C+").concat(i.candidates[0].location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=4326&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=");try{fetch(a).then((e=>e.json())).then((function(a){if(a.features.length){let a,s=null;i.candidates.forEach((e=>{""!==e.attributes.parcel_id&&t.checkParcelValid(e.attributes.parcel_id)&&(s=e)})),a=null==s?i.candidates[0].location:null,null===s?(t.parcelStatus="Invalid",t.needGeocode(e,t,a),t.clearSuggestions(t),r[0].setAttribute("data-parcel-id",JSON.stringify(i.candidates[0]))):(t.parcelStatus="Valid",t.needGeocode(e,t,a),t.clearSuggestions(t),r[0].setAttribute("data-parcel-id",JSON.stringify(s)))}else t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}))}catch(s){t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}}else t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}))}catch(l){t.parcelStatus="Invalid",t.needGeocode(e,t,location),t.clearSuggestions(t),r[0].setAttribute("data-app-state","error")}}selectSuggestion(e,t){let a=null;a="SPAN"===e.target.tagName?e.target.parentNode:e.target,"no-parcel"===a.attributes[0].value?(t.clearSuggestions(t),t.supplementGeocoder(a.innerText,t,"submit")):t.supplementGeocoder(a.innerText,t,"submit")}inputChange(e,t){switch(e.key){case"Enter":""!=e.target.value&&void 0!=e.target.value&&t.supplementGeocoder(e.target.value,t,"submit");break;case"ArrowDown":case"ArrowUp":case"ArrowRight":case"ArrowLeft":break;case void 0:""!=e.target.value&&void 0!=e.target.value&&t.supplementGeocoder(e.target.value,t,"submit");break;default:t.clearSuggestions(t),t.supplementGeocoder(e.target.value,t,"suggestions")}}clearSuggestions(e){for(;e.form.childNodes[3].firstChild;)e.form.childNodes[3].removeChild(e.form.childNodes[3].firstChild)}needGeocode(e,t,a){fetch("https://us-central1-local-services-loopkup.cloudfunctions.net/getToken").then((e=>e.json())).then((function(r){let i=e.split(" RECOMMENDED")[0],s=[{attributes:{valid_parcel_status:t.parcelStatus,user_input:i},geometry:{x:0,y:0}}];null!=a&&(s[0].geometry.x=a.x,s[0].geometry.y=a.y);let n=new Request("https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/addressvalidator/FeatureServer/0/addFeatures?token=".concat(r.access_token,"&features=").concat(encodeURIComponent(JSON.stringify(s)),"&f=json"),{method:"POST",body:"",headers:new Headers,mode:"cors",cache:"default"});fetch(n).then((e=>{}))}))}checkParcelValid(e){return/\d/.test(e)}submit(e,t){e.preventDefault(),t.supplementGeocoder(e.target[0].value,t,"submit")}}class i extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.navToolsStyle=document.createElement("style"),this.navToolsStyle.textContent="\n            #nav-tools-wrapper { display: flex; flex-direction: column;}\n            button.clear { font-size: 1.25em; width: 2.5em; height: 2.5em; background-color: #FEB70D; cursor: pointer; border: none; }\n            button.nav { width: 3.75em; height: 3.75em; border: none; cursor: pointer;background: #fff; }\n            button.nav:hover { background-color: #e6e6e6; transition: all 500ms cubic-bezier(.64,.09,.08,1); }\n            button.nav.active { background-color: #9fd5b3; }\n            button.nav img { width: 100%; }\n        ",this.loadNavTools(this)}clearDisplay(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}loadNavTools(e){const t=document.getElementsByTagName("d6-business-map"),a=t[0].getAttribute("data-app-state"),r=t[0].getAttribute("data-app-mode"),i=t[0].getAttribute("data-inital-sets"),s=t[0].getAttribute("data-initial-map-available"),n=e.shadowRoot;n.appendChild(e.navToolsStyle);const o=document.createElement("section");o.id="nav-tools-wrapper",o.setAttribute("role","navigation"),o.setAttribute("aria-label","Data Navigation");const l=document.createElement("cod-button");if(l.addEventListener("click",(e=>{"my-home-info"==t[0].getAttribute("data-app-mode")?(t[0].setAttribute("data-app-state","welcome-screen"),t[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection")):(t[0].setAttribute("data-app-state","active-screen"),t[0].setAttribute("data-active-sets",i)),"true"==s?t[0].setAttribute("data-map-available","true"):t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-parcel-id","none"),t[0].setAttribute("data-api-stored-datasets","{}"),t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-section","property")})),l.setAttribute("data-primary",!0),l.setAttribute("data-label","x"),l.setAttribute("data-size","lg"),l.setAttribute("data-hover",!1),l.setAttribute("data-extra-classes","fw-bold"),l.setAttribute("data-background-color","warning"),l.setAttribute("data-img",""),l.setAttribute("data-img-alt",""),l.setAttribute("data-shape","square"),l.setAttribute("data-icon",""),o.appendChild(l),"my-home-info"==r&&"error"!=a){const e=document.createElement("cod-button");e.setAttribute("data-label",""),e.setAttribute("data-size","lg"),e.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/home.png"),e.setAttribute("data-img-alt","about this property"),e.setAttribute("data-shape","square"),e.setAttribute("data-nav-value","about this property"),e.setAttribute("data-icon",""),"about this property"==t[0].getAttribute("data-active-section")?(e.setAttribute("data-background-color","success"),e.setAttribute("data-primary",!0)):(e.setAttribute("data-background-color","secondary"),e.setAttribute("data-primary",!1),e.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","assessors-data,neighborhood,recycling,rental-data,rental-cert,demo-status,blight-data,permit-data,DWSDBackupProtection"),t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-active-section","about this property"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(e);const a=document.createElement("cod-button");a.setAttribute("data-label",""),a.setAttribute("data-size","lg"),a.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/government.png"),a.setAttribute("data-img-alt","government officials"),a.setAttribute("data-shape","square"),a.setAttribute("data-nav-value","government officials"),a.setAttribute("data-icon",""),"government officials"==t[0].getAttribute("data-active-section")?(a.setAttribute("data-background-color","success"),a.setAttribute("data-primary",!0)):(a.setAttribute("data-background-color","secondary"),a.setAttribute("data-primary",!1),a.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","council,council-members,bop-members,district-managers,business-liaison,district-inspectors,npo"),t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-active-section","government officials"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(a);const r=document.createElement("cod-button");r.setAttribute("data-label",""),r.setAttribute("data-size","lg"),r.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/zone.png"),r.setAttribute("data-img-alt","special areas and zones"),r.setAttribute("data-shape","square"),r.setAttribute("data-nav-value","special areas and zones"),r.setAttribute("data-icon",""),"special areas and zones"==t[0].getAttribute("data-active-section")?(r.setAttribute("data-background-color","success"),r.setAttribute("data-primary",!0)):(r.setAttribute("data-background-color","secondary"),r.setAttribute("data-primary",!1),r.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","nez,nrsa,historicDistrict"),t[0].setAttribute("data-map-available","false"),t[0].setAttribute("data-active-section","special areas and zones"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(r);const i=document.createElement("cod-button");i.setAttribute("data-label",""),i.setAttribute("data-size","lg"),i.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/nearby.png"),i.setAttribute("data-img-alt","things nearby"),i.setAttribute("data-shape","square"),i.setAttribute("data-nav-value","things nearby"),i.setAttribute("data-icon",""),"things nearby"==t[0].getAttribute("data-active-section")?(i.setAttribute("data-background-color","success"),i.setAttribute("data-primary",!0)):(i.setAttribute("data-background-color","secondary"),i.setAttribute("data-primary",!1),i.addEventListener("click",(e=>{if("none"!=t[0].getAttribute("data-api-active-datasets")){let e=JSON.parse(t[0].getAttribute("data-api-stored-datasets")),a=JSON.parse(t[0].getAttribute("data-api-active-datasets"));for(const t in a)t in e||(e[t]=a[t]);t[0].setAttribute("data-api-stored-datasets",JSON.stringify(e))}t[0].setAttribute("data-api-active-datasets","none"),t[0].setAttribute("data-active-sets","schools,demos-data,stabilization-data,improve-det"),t[0].setAttribute("data-active-section","things nearby"),t[0].setAttribute("data-map-available","true"),t[0].setAttribute("data-app-state","loading-screen")}))),o.appendChild(i);const s=document.createElement("cod-button");s.setAttribute("data-label",""),s.setAttribute("data-size","lg"),s.setAttribute("data-img","https://detroitmi.gov/sites/detroitmi.localhost/files/2023-01/print.png"),s.setAttribute("data-img-alt","print"),s.setAttribute("data-shape","square"),s.setAttribute("data-nav-value","print"),s.setAttribute("data-icon",""),"print"==t[0].getAttribute("data-active-section")?(s.setAttribute("data-background-color","success"),s.setAttribute("data-primary",!0)):(s.setAttribute("data-background-color","secondary"),s.setAttribute("data-primary",!1),s.addEventListener("click",(e=>{e.target.getAttribute("data-nav-value")&&t[0].setAttribute("data-app-state","print")}))),o.appendChild(s)}n.appendChild(o)}}customElements.define("app-geocoder",r),customElements.define("app-nav-tools",i);class s extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"}).innerHTML='\n    <cod-offcanvas data-id="offcanvasExample" data-show="true">\n    <cod-offcanvas-header>\n      <h5>Offcanvas</h5>\n    </cod-offcanvas-header>\n    <cod-offcanvas-body>\n      <p>\n        Some text as placeholder. In real life you can have the elements you\n        have chosen. Like, text, images, lists, etc.\n      </p>\n    </cod-offcanvas-body>\n  </cod-offcanvas>\n    '}attributeChangedCallback(e,t,a){"data-panel-data"==a&&this.clearDisplay(this),"data-pagination"==e&&this.clearDisplay(this),this.loadDisplay(this)}clearDisplay(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}formatDate(e){const t=new Date(e);return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())}printInfo(e){let t=e.buildDataSection(e),a=window.open("","","height=500, width=500");a.document.write("<html>"),a.document.write("<head><style>@media print {.noprint { visibility: hidden;} p.data-block-title{border-bottom: 1px solid;} .data-block-title button { display: none; } body { column-count: 2;} .data-block {     -webkit-column-break-inside: avoid; page-break-inside: avoid; break-inside: avoid; } }</style></head>"),a.document.write("<body >"),a.document.write(t.children[1].innerHTML),a.document.write("</body>"),a.document.close(),a.print()}loadDisplay(e){const t=e.shadowRoot,a=document.createElement("section"),r=document.createElement("app-geocoder"),i=document.createElement("app-nav-tools"),s=document.getElementsByTagName("my-home-info");switch(i.printInfo=e.printInfo,a.id="display-wrapper",this.getAttribute("data-display-type")){case"active-panel":console.log("loading panel");let n=JSON.parse(this.getAttribute("data-panel-data")),o=document.createElement("cod-offcanvas");o.id="d6-map-panel",o.setAttribute("data-show","true");let l=document.createElement("cod-offcanvas-header"),c=document.createElement("cod-offcanvas-body");l.innerHTML="<h5>".concat(n.properties.business_name),c.innerHTML="\n        <p><strong>Address:</strong> ".concat(n.properties.address,"</p>\n        <p><strong>Phone:</strong> ").concat(n.properties.business_phone_number,"</p>\n        <p><strong>Website:</strong> ").concat(n.properties.business_phone_website,"</p>\n        "),o.appendChild(l),o.appendChild(c),a.appendChild(o),t.appendChild(a),console.log(o);break;case"active":t.appendChild(e.welcomeStyle),a.appendChild(r),t.appendChild(a);break;case"loading":const d=document.createElement("cod-loader");d.setAttribute("data-color","color-3"),a.appendChild(d),t.appendChild(a);break;case"results":let u=JSON.parse(s[0].getAttribute("data-parcel-id"));t.appendChild(e.resultsStyle);let p=document.createElement("section");p.className="results-container",p.appendChild(i);let m=document.createElement("article");m.className="dataset-results";let f=document.createElement("article");f.className="result-address",f.innerText=u.address,m.appendChild(f);let h=e.buildDataSection(e);m.appendChild(h),p.appendChild(m),a.appendChild(p),t.appendChild(a);break;case"error":let b=document.createElement("section");t.appendChild(e.resultsStyle),b.className="results-container",b.appendChild(i);let g=document.createElement("article");g.className="error-result",g.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="100" height="70" viewBox="0 0 100 68">\n          <g id="large">\n            <path fill="none" stroke="#F44" d="M55.8 38.5l6.2-1.2c0-1.8-.1-3.5-.4-5.3l-6.3-.2c-.5-2-1.2-4-2.1-6l4.8-4c-.9-1.6-1.9-3-3-4.4l-5.6 3c-1.3-1.6-3-3-4.7-4.1l2-6A30 30 0 0 0 42 8l-3.3 5.4c-2-.7-4.2-1-6.2-1.2L31.3 6c-1.8 0-3.5.1-5.3.4l-.2 6.3c-2 .5-4 1.2-6 2.1l-4-4.8c-1.6.9-3 1.9-4.4 3l3 5.6c-1.6 1.3-3 3-4.1 4.7l-6-2A32.5 32.5 0 0 0 2 26l5.4 3.3c-.7 2-1 4.2-1.2 6.2L0 36.7c0 1.8.1 3.5.4 5.3l6.3.2c.5 2 1.2 4 2.1 6l-4.8 4c.9 1.6 1.9 3 3 4.4l5.6-3c1.4 1.6 3 3 4.7 4.1l-2 6A30.5 30.5 0 0 0 20 66l3.4-5.4c2 .7 4 1 6.1 1.2l1.2 6.2c1.8 0 3.5-.1 5.3-.4l.2-6.3c2-.5 4-1.2 6-2.1l4 4.8c1.6-.9 3-1.9 4.4-3l-3-5.6c1.6-1.3 3-3 4.1-4.7l6 2A32 32 0 0 0 60 48l-5.4-3.3c.7-2 1-4.2 1.2-6.2zm-13.5 4a12.5 12.5 0 1 1-22.6-11 12.5 12.5 0 0 1 22.6 11z"/>\n            <animateTransform attributeName="transform" begin="0s" dur="3s" from="0 31 37" repeatCount="indefinite" to="360 31 37" type="rotate"/>\n          </g>\n          <g id="small">\n            <path fill="none" stroke="#F44" d="M93 19.3l6-3c-.4-1.6-1-3.2-1.7-4.8L90.8 13c-.9-1.4-2-2.7-3.4-3.8l2.1-6.3A21.8 21.8 0 0 0 85 .7l-3.6 5.5c-1.7-.4-3.4-.5-5.1-.3l-3-5.9c-1.6.4-3.2 1-4.7 1.7L70 8c-1.5 1-2.8 2-3.9 3.5L60 9.4a20.6 20.6 0 0 0-2.2 4.6l5.5 3.6a15 15 0 0 0-.3 5.1l-5.9 3c.4 1.6 1 3.2 1.7 4.7L65 29c1 1.5 2.1 2.8 3.5 3.9l-2.1 6.3a21 21 0 0 0 4.5 2.2l3.6-5.6c1.7.4 3.5.5 5.2.3l2.9 5.9c1.6-.4 3.2-1 4.8-1.7L86 34c1.4-1 2.7-2.1 3.8-3.5l6.3 2.1a21.5 21.5 0 0 0 2.2-4.5l-5.6-3.6c.4-1.7.5-3.5.3-5.1zM84.5 24a7 7 0 1 1-12.8-6.2 7 7 0 0 1 12.8 6.2z"/>\n            <animateTransform attributeName="transform" begin="0s" dur="2s" from="0 78 21" repeatCount="indefinite" to="-360 78 21" type="rotate"/>\n          </g>\n        </svg>\n        <h3>No Information found on this address. Please close and try again.</h3>\n        ',b.appendChild(g),a.appendChild(b),t.appendChild(a);break;case"print":let y=JSON.parse(s[0].getAttribute("data-parcel-id"));t.appendChild(e.resultsStyle);let v=document.createElement("section");v.className="results-container",v.appendChild(i);let _=document.createElement("article");_.className="dataset-results";let A=document.createElement("article");A.className="result-address",A.innerText=y.address,_.appendChild(A);let S=e.buildDataSection(e);_.appendChild(S),v.appendChild(_),a.appendChild(v),t.appendChild(a),e.printInfo(e)}}}const n=a(208),o=a(827);class l extends HTMLElement{static get observedAttributes(){return["data-loader-state","data-parcel-id"]}constructor(){super();const e=this.attachShadow({mode:"open"}),t=document.createElement("section");t.id="loader-wrapper",e.appendChild(t)}attributeChangedCallback(e,t,a){this.shadowRoot;if("data-loader-state"===e)this.clearLoader(this),this.loadLoader(this)}getDataSets(e){const t=document.getElementsByTagName("my-home-info"),a=t[0].getAttribute("data-active-sets").split(","),r=JSON.parse(t[0].getAttribute("data-parcel-id"));let i=[],s=new Promise(((e,t)=>{if("CONDO BUILDING"!=r.attributes.parcel_id){let t="https://apis.detroitmi.gov/assessments/parcel/"+r.attributes.parcel_id+"/";return fetch(t).then((e=>e.json())).then((function(t){e({id:"assessors-data",data:t})})).catch((e=>{}))}e({id:"assessors-data",data:null})})),l=new Promise(((e,t)=>{e({id:"neighborhood",data:r})})),c=new Promise(((e,t)=>e({id:"council",data:r}))),d=new Promise(((e,t)=>fetch("/rest/bop?_format=json").then((e=>e.json())).then((function(t){e({id:"bop-members",data:t})})).catch((e=>{})))),u=new Promise(((e,t)=>fetch("/rest/district-managers?_format=json").then((e=>e.json())).then((function(t){e({id:"district-managers",data:t})})).catch((e=>{})))),p=new Promise(((e,t)=>fetch("/rest/district-inspectors?_format=json").then((e=>e.json())).then((function(t){e({id:"district-inspectors",data:t})})).catch((e=>{})))),m=new Promise(((e,t)=>fetch("/rest/council-members?_format=json").then((e=>e.json())).then((function(t){e({id:"council-members",data:t})})).catch((e=>{})))),f=(new Promise(((e,t)=>{e({id:"DWSDBackupProtection",data:r})})),new Promise(((e,t)=>{e({id:"HRDFlooding",data:r})}))),h=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/NRSA_2020/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(r.location.x,"%2C").concat(r.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"nrsa",data:t})})).catch((e=>{}))})),b=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/NEZHOMESTEAD2021/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(r.location.x,"%2C").concat(r.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"nez",data:t})})).catch((e=>{}))})),g=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/BuildingPermits/FeatureServer/0/query?where=parcel_id+%3D+%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=3&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json");return fetch(a).then((e=>e.json())).then((function(t){e({id:"permit-data",data:t})})).catch((e=>{}))})),y=new Promise(((e,t)=>{let a;return a="CONDO BUILDING"!=r.attributes.parcel_id?"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=parcel_id+%3D+%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json"):"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/RentalStatuses/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(r.location.x,"%2C+").concat(r.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json"),fetch(a).then((e=>e.json())).then((function(t){e({id:"rental-data",data:t})})).catch((e=>{}))})),v=new Promise(((e,t)=>{let a;return a="CONDO BUILDING"!=r.attributes.parcel_id?"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=parcel_id%3D%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json"):"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/active_cofc/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(r.location.x,"%2C+").concat(r.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIndexIntersects&distance=&units=esriSRUnit_Foot&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&gdbVersion=&returnDistinctValues=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&multipatchOption=&resultOffset=&resultRecordCount=&f=json"),fetch(a).then((e=>e.json())).then((function(t){e({id:"rental-cert-data",data:t})})).catch((e=>{}))})),_=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Blight_Violations_(DAH)/FeatureServer/0/query?where=parcelno%3D%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=violation_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"blight-data",data:t})})).catch((e=>{}))})),A=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Property_Sales/FeatureServer/0/query?where=PARCEL_NO%3D%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=SALE_DATE&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=2&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"sales-data",data:t})})).catch((e=>{}))})),S=new Promise(((t,a)=>{let i=n.point([r.location.x,r.location.y]),s=n.buffer(i,2,{units:"miles"}),l=n.simplify(s.geometry,{tolerance:.005,highQuality:!1}),c=o.convert(l),d="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(encodeURI(JSON.stringify(c)),"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson");return fetch(d).then((e=>e.json())).then((function(a){a.features.sort(e.sortFeaturesByDistanceTo(i)),t({id:"demos-data",data:a})})).catch((e=>{}))})),C=new Promise(((t,a)=>{let i=n.point([r.location.x,r.location.y]),s=n.buffer(i,2,{units:"miles"}),l=n.simplify(s.geometry,{tolerance:.005,highQuality:!1}),c=o.convert(l),d="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Contracted_Stabilizations/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(encodeURI(JSON.stringify(c)),"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson");return fetch(d).then((e=>e.json())).then((function(a){a.features.sort(e.sortFeaturesByDistanceTo(i)),t({id:"stabilization-data",data:a})})).catch((e=>{}))})),E=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Demolitions_under_Contract/FeatureServer/0/query?where=parcel_id+%3D+%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=demolish_by_date&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=1&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"demo-status",data:t})})).catch((e=>{}))})),O=new Promise(((t,a)=>{let i=n.point([r.location.x,r.location.y]),s=n.buffer(i,2,{units:"miles"}),l=n.simplify(s.geometry,{tolerance:.005,highQuality:!1}),c=o.convert(l),d="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/2018_2019_Schools_(EEM)/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(encodeURI(JSON.stringify(c)),"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=geojson");return fetch(d).then((e=>e.json())).then((function(a){a.features.sort(e.sortFeaturesByDistanceTo(i)),t({id:"schools",data:a})})).catch((e=>{}))})),k=new Promise(((e,t)=>{let a="https://opengis.detroitmi.gov/opengis/rest/services/PublicSafety/NeighborhoodPoliceOfficers/FeatureServer/0/query?where=&objectIds=&time=&geometry=".concat(r.location.x,"%2C").concat(r.location.y,"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&resultType=none&distance=1&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=4326&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnDistinctValues=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"npo",data:t})})).catch((e=>{}))})),w=new Promise(((e,t)=>{let a=n.point([r.location.x,r.location.y]),i=n.buffer(a,300,{units:"meters"}),s=n.simplify(i.geometry,{tolerance:.005,highQuality:!1}),l=o.convert(s),c="https://opengis.detroitmi.gov/opengis/rest/services/DoIT/ImproveDetroitIssues/FeatureServer/0/query?where=status+%3C%3E+%27Closed%27+and+status+%3C%3E+%27Archived%27&objectIds=&time=&geometry=".concat(encodeURI(JSON.stringify(l)),"&geometryType=esriGeometryPolygon&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=3&f=geojson");return fetch(c).then((e=>e.json())).then((function(t){e({id:"improve-det",data:t})})).catch((e=>{}))})),F=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/WasteCollectionAreas/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+r.location.x+"%2C+"+r.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((e=>e.json())).then((function(t){let a=new Date,r=a.getMonth()+1,i=a.getFullYear(),s="https://apis.detroitmi.gov/waste_schedule/details/".concat(t.features[0].attributes.FID,"/year/").concat(i,"/month/").concat(r,"/");return fetch(s).then((e=>e.json())).then((function(t){e({id:"recycling",data:t})}))})).catch((e=>{}))})),D=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/Detroit_Local_Historic_Districts/FeatureServer/0/query?where=&text=&objectIds=&time=&geometry="+r.location.x+"%2C+"+r.location.y+"&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelWithin&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&f=json";fetch(a).then((e=>e.json())).then((function(t){e({id:"historicDistrict",data:t})})).catch((e=>{}))})),R=new Promise(((e,t)=>{let a="https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/fie_properties_final/FeatureServer/0/query?where=parcel_id%3D%27".concat(r.attributes.parcel_id,"%27&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&returnGeodetic=false&outFields=*&returnHiddenFields=false&returnGeometry=true&returnCentroid=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=json&token=");return fetch(a).then((e=>e.json())).then((function(t){e({id:"fireEscrow",data:t})})).catch((e=>{}))}));return a.forEach((e=>{switch(e){case"council":i.push(c);break;case"neighborhood":i.push(l);break;case"assessors-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&("CONDO BUILDING"==r.attributes.parcel_id||i.push(s));break;case"permit-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&i.push(g);break;case"blight-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&i.push(_);break;case"salesHistoryData":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&i.push(A);break;case"fireEscrow":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&i.push(R);break;case"nez":i.push(b);break;case"nrsa":i.push(h);break;case"npo":i.push(k);break;case"improve-det":i.push(w);break;case"recycling":i.push(F);break;case"rental-data":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&i.push(y);break;case"rental-cert":i.push(v);break;case"demo-status":null!=r.attributes.parcel_id&&""!=r.attributes.parcel_id&&i.push(E);break;case"demos-data":i.push(S);break;case"stabilization-data":i.push(C);break;case"schools":i.push(O);break;case"historicDistrict":i.push(D);break;case"district-managers":i.push(u);break;case"district-inspectors":i.push(p);break;case"council-members":i.push(m);break;case"bop-members":i.push(d);break;case"HRDFlooding":console.log("pushing HRDFlooding"),i.push(f)}})),i}buildCouncilData(e){let t={council:{district:"District ".concat(e.council.data.attributes.council_district),districtURL:null,name:null,url:null,phone:null},bop:{district:"District ".concat(e.council.data.attributes.council_district),url:null,name:null,url:null,phone:null,email:null},dmanager:{name:null,url:"/departments/department-of-neighborhoods/district-".concat(e.council.data.attributes.council_district,"#block-views-block-contacts-special-block-1"),phone:null},ddmanager:{name:null,url:"/departments/department-of-neighborhoods/district-".concat(e.council.data.attributes.council_district,"#block-views-block-contacts-special-block-1"),phone:null},bliaision:{name:null,email:null},enforcement:{name:null,phone:null}};switch(e.council.data.attributes.council_district.toString()){case"1":t.council.districtURL="/taxonomy/term/1276",e["council-members"].data.forEach((e=>{"1276"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1276",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 1")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4331";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 1 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 1 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 1 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 1")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"2":t.council.districtURL="/taxonomy/term/1476",e["council-members"].data.forEach((e=>{"1476"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1476",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 2")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4336";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 2 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 2 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 2 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 2")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"3":t.council.districtURL="/taxonomy/term/1481",e["council-members"].data.forEach((e=>{"1481"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1481",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 3")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4341";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 3 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 3 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 3 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 3")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"4":t.council.districtURL="/taxonomy/term/1486",e["council-members"].data.forEach((e=>{"1486"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1486",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 4")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4346";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 4 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 4 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 4 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 4")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"5":t.council.districtURL="/taxonomy/term/1346",e["council-members"].data.forEach((e=>{"1346"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1346",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 5")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4351";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 5 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 5 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 5 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 5")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}));break;case"6":t.council.districtURL="/taxonomy/term/1491",e["council-members"].data.forEach((e=>{if("1491"==e.tid){let a=e.field_phone.replace("Office: ","");a=a.replace(/ /g,"-"),a=a.replace(/[()]/g,""),t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1491",t.council.phone='<a href="tel:'.concat(a,'">').concat(e.field_phone,"</a>")}})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 6")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4321";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{if(e.field_contact_position.includes("District 6 Manager")){let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.dmanager.name=e.title,t.dmanager.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>")}if(e.field_contact_position.includes("District 6 Deputy Manager")){let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.ddmanager.name=e.title,t.ddmanager.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>")}e.field_contact_position.includes("District 6 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{if(e.field_responsibilities.includes("District 6")){let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.enforcement.name=e.title,t.enforcement.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>")}}));break;case"7":t.council.districtURL="/taxonomy/term/1511",e["council-members"].data.forEach((e=>{"1511"==e.tid&&(t.council.name=e.field_organization_head_name,t.council.url="/taxonomy/term/1511",t.council.phone=e.field_phone)})),e["bop-members"].data.forEach((e=>{if(e.field_responsibilities.includes("District 7")){t.bop.name=e.title,t.bop.url="/taxonomy/term/4356";let a=e.field_telephone.replace(/ /g,"-");a=a.replace(/[()]/g,""),t.bop.phone='<a href="tel:'.concat(a,'">').concat(e.field_telephone,"</a>"),t.bop.email=e.field_email_address}})),e["district-managers"].data.forEach((e=>{e.field_contact_position.includes("District 7 Manager")&&(t.dmanager.name=e.title,t.dmanager.phone=e.field_telephone),e.field_contact_position.includes("District 7 Deputy Manager")&&(t.ddmanager.name=e.title,t.ddmanager.phone=e.field_telephone),e.field_contact_position.includes("District 7 Business Liaison")&&(t.bliaision.name=e.title,t.bliaision.email=e.field_email_address)})),e["district-inspectors"].data.forEach((e=>{e.field_responsibilities.includes("District 7")&&(t.enforcement.name=e.title,t.enforcement.phone=e.field_telephone)}))}return t}sortFeaturesByDistanceTo(e){return function(t,a){var r={units:"radians"};return n.distance(e,t,r)-n.distance(e,a,r)}}getData(e){const t=document.getElementsByTagName("my-home-info"),a=t[0].getAttribute("data-active-sets").split(","),r=(JSON.parse(t[0].getAttribute("data-parcel-id")),JSON.parse(t[0].getAttribute("data-api-stored-datasets")));let i=!1;for(let s in r)a.includes(s)&&(i=!0);if(i){let e={};a.forEach((t=>{e[t]=r[t]})),t[0].setAttribute("data-api-active-datasets",JSON.stringify(e)),t[0].setAttribute("data-app-state","results")}else{let r=e.getDataSets(e);Promise.all(r).then((r=>{console.log(r);let i={};for(let e in r)null!=r[e]?i[r[e].id]=r[e]:initialLoadChecker=!1;if(a.includes("council")){let t=e.buildCouncilData(i);i["council-members"]={id:"council-members",data:t.council},i["bop-members"]={id:"bop-members",data:t.bop};let a={manager:t.dmanager,deputy:t.ddmanager};i["district-managers"]={id:"district-managers",data:a},i["business-liaison"]={id:"business-liaison",data:t.bliaision},i["district-inspectors"]={id:"district-inspectors",data:t.enforcement}}if(a.includes("DWSDBackupProtection"))try{i.DWSDBackupProtection||(i.DWSDBackupProtection={id:"DWSDBackupProtection",data:i.neighborhood.data})}catch(s){}t[0].setAttribute("data-api-active-datasets",JSON.stringify(i)),t[0].setAttribute("data-app-state","results")})).catch((e=>{}))}}clearLoader(e){const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}loadLoader(e){const t=e.shadowRoot,a=document.createElement("section");switch(a.id="loader-wrapper",e.getAttribute("data-loader-state")){case"active":e.getData(e);const r=document.createElement("p");r.innerText="Loading DATA",a.appendChild(r),t.appendChild(a);break;case"finished":const i=document.createElement("p");i.innerText="Data loaded",a.appendChild(i),t.appendChild(a)}}}const c=JSON.parse('{"layers":[{"name":"neighborhoods","layers":[{"name":"neighborhoods-lines","type":"line","color":"#004445","opacity":null,"width":2,"active":false,"source":"neighborhoods"},{"name":"neighborhoods-fill","type":"fill","color":"#004445","opacity":0.1,"width":null,"active":false,"source":"neighborhoods"}],"source":"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/Current_City_of_Detroit_Neighborhoods/FeatureServer/0/query?where=1%3D1&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&returnEnvelope=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="},{"name":"neighborhood-labels","layers":[{"name":"neighborhood-labels","type":"text","color":"#004445","opacity":null,"width":null,"active":false,"size":18,"text":"name","source":"neighborhood-labels"}],"source":"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/theNeighborhoods/FeatureServer/2/query?where=1%3D1&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="},{"name":"police-precincts","layers":[{"name":"police-precincts-lines","type":"line","color":"#0658c4","opacity":null,"width":1,"active":false,"source":"police-precincts"},{"name":"police-precincts-fill","type":"fill","color":"#0658c4","opacity":0.1,"width":null,"active":false,"source":"police-precincts"}],"source":"https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/DPD_Precincts_Reid2/FeatureServer/0/query?where=1%3D1&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&returnEnvelope=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="},{"name":"zip-codes","layers":[{"name":"zip-codes-lines","type":"line","color":"#481718","opacity":null,"width":1,"active":false,"source":"zip-codes"},{"name":"zip-codes-fill","type":"fill","color":"#481718","opacity":0.1,"width":null,"active":false,"source":"zip-codes"}],"source":"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/ZipCodes/FeatureServer/0/query?where=1%3D1&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&returnEnvelope=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="},{"name":"coucil-district-6","layers":[{"name":"coucil-district-6-lines","type":"line","color":"#c40632","opacity":null,"width":3,"active":true,"source":"coucil-district-6"}],"source":"https://services2.arcgis.com/qvkbeam7Wirps6zC/arcgis/rest/services/Council_Districts/FeatureServer/0/query?where=DistrictNu%3D6&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&returnCentroid=false&returnEnvelope=false&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="}]}'),d=a.p+"static/media/logo2.be972cd9.png";customElements.define("app-display",s),customElements.define("app-data-loader",l);class u extends HTMLElement{static get observedAttributes(){return["data-app-state","data-parcel-id","data-map-state","data-active-boundaries","data-active-filters"]}constructor(){super();const e=this.attachShadow({mode:"open"}),t=document.getElementsByTagName("d6-business-map");t[0].getAttribute("data-app-state");this.mainData={name:"d6",data:"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/council_surveyed_businesses/FeatureServer/0/query?where=1%3D1&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=pgeojson&token="},this.layers=c;const a=document.createElement("style");a.textContent="#app-wrapper{\n    position: relative;\n    display: flex;\n    -ms-flex-align: stretch;\n    height: 800px;\n}\n\ncod-map{\n    flex: 1;\n}\n\n#d6-map-nav{\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    top: 1em;\n    left: 1em;\n    z-index: 10;\n}\n\n.offcanvas-title img{\n    width: 6em;\n    position: relative;\n    left: 8em;\n}",this.shadowRoot.appendChild(a),this.appWrapper=document.createElement("section"),this.appWrapper.id="app-wrapper",e.appendChild(this.appWrapper),this.nav=document.createElement("section"),this.nav.id="d6-map-nav",this.filterBtn=document.createElement("cod-button"),this.filterBtn.setAttribute("data-label",""),this.filterBtn.setAttribute("data-size","lg"),this.filterBtn.setAttribute("data-img",""),this.filterBtn.setAttribute("data-img-alt",""),this.filterBtn.setAttribute("data-shape","square"),this.filterBtn.setAttribute("data-nav-value","filters"),this.filterBtn.setAttribute("data-icon","house-fill"),this.filterBtn.setAttribute("data-icon-size","medium"),this.filterBtn.setAttribute("data-aria-label","Filters"),this.filterBtn.setAttribute("data-extra-classes","icon-center"),this.filterBtn.setAttribute("data-background-color","primary"),this.filterBtn.setAttribute("data-primary",!0),this.filterBtn.addEventListener("click",(e=>{document.getElementsByTagName("d6-business-map")[0].setAttribute("data-app-state","active-filters")})),this.nav.appendChild(this.filterBtn),this.LayerBtn=document.createElement("cod-button"),this.LayerBtn.setAttribute("data-label",""),this.LayerBtn.setAttribute("data-size","lg"),this.LayerBtn.setAttribute("data-img",""),this.LayerBtn.setAttribute("data-img-alt",""),this.LayerBtn.setAttribute("data-shape","square"),this.LayerBtn.setAttribute("data-nav-value","layers"),this.LayerBtn.setAttribute("data-icon","check-circle-fill"),this.LayerBtn.setAttribute("data-icon-size","medium"),this.LayerBtn.setAttribute("data-aria-label","Layers"),this.LayerBtn.setAttribute("data-extra-classes","icon-center"),this.LayerBtn.setAttribute("data-background-color","primary"),this.LayerBtn.setAttribute("data-primary",!0),this.LayerBtn.addEventListener("click",(e=>{document.getElementsByTagName("d6-business-map")[0].setAttribute("data-app-state","active-layers")})),this.nav.appendChild(this.LayerBtn),this.infoBtn=document.createElement("cod-button"),this.infoBtn.setAttribute("data-label",""),this.infoBtn.setAttribute("data-size","lg"),this.infoBtn.setAttribute("data-img",""),this.infoBtn.setAttribute("data-img-alt",""),this.infoBtn.setAttribute("data-shape","square"),this.infoBtn.setAttribute("data-nav-value","info"),this.infoBtn.setAttribute("data-icon","exclamation-circle-fill"),this.infoBtn.setAttribute("data-icon-size","medium"),this.infoBtn.setAttribute("data-aria-label","Information"),this.infoBtn.setAttribute("data-extra-classes","icon-center"),this.infoBtn.setAttribute("data-background-color","primary"),this.infoBtn.setAttribute("data-primary",!0),this.infoBtn.addEventListener("click",(e=>{document.getElementsByTagName("d6-business-map")[0].setAttribute("data-app-state","active-info")})),this.nav.appendChild(this.infoBtn),e.appendChild(this.nav),this.panel=document.createElement("cod-offcanvas"),this.panel.id="d6-map-panel",this.panelHeader=document.createElement("cod-offcanvas-header"),this.panelLogo=document.createElement("img"),this.panelLogo.style.width="6em",this.panelLogo.style.position="relative",this.panelLogo.style.left="8em",this.panelLogo.src=d,this.panelHeader.appendChild(this.panelLogo),this.panelBody=document.createElement("cod-offcanvas-body"),this.panelContent=document.createElement("article"),this.panelContent.innerHTML="",this.panelBody.appendChild(this.panelContent),this.panel.appendChild(this.panelHeader),this.panel.appendChild(this.panelBody),e.appendChild(this.panel);let r={id:"schools",layers:[{name:"data-points",type:"circle",radius:10,color:"#004445",active:!0,sort:10,source:"data-points"}],source:this.mainData.data};this.map=document.createElement("cod-map"),this.map.id="d6-map",this.map.setAttribute("data-parent-component","d6-business-map"),this.map.setAttribute("data-map-mode","map-panel"),this.map.setAttribute("data-zoom","12"),this.map.setAttribute("data-map-data",JSON.stringify(r)),this.map.setAttribute("data-map-layers",JSON.stringify(this.layers.layers)),this.map.setAttribute("data-location",this.getAttribute("data-location")),this.map.setAttribute("data-map-state","init"),t[0].setAttribute("data-active-boundaries","coucil-district-6-lines"),this.appWrapper.appendChild(this.map)}attributeChangedCallback(e,t,a){switch(console.log("App - attribute: ".concat(e,", old: ").concat(t,", new: ").concat(a)),e){case"data-active-filters":const e=a.split(",");let r=this.buildQuery(e);console.log(r);const i=this;fetch(r).then((e=>e.json())).then((function(e){console.log(e),i.map.map.getSource("data-points")&&i.map.map.getSource("data-points").setData(e)})).catch((e=>{}));break;case"data-active-boundaries":const s=t.split(","),n=a.split(",");let o;n.length>s.length?(o=this.arrayDifference(n,s),this.changeVisibility(o,"visible",this.map)):(o=this.arrayDifference(s,n),this.changeVisibility(o,"none",this.map));break;default:this.loadApp(this)}}arrayDifference(e,t){const a=[];for(let r=0;r<e.length;r++)-1===t.indexOf(e[r])&&a.push(e[r]);return a}buildQuery(e){console.log(e);let t=[];return e.forEach((e=>{switch(e){case"is_asian_owned":t.push("is_asian_owned%3D1");break;case"is_black_owned":t.push("is_black_owned%3D1");break;case"has_clinic_community_health_ser":t.push("has_clinic_community_health_ser%3D1")}})),t=t.join("+AND+"),""===t&&(t="1%3D1"),"https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/council_surveyed_businesses/FeatureServer/0/query?where=".concat(t,"&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&resultType=none&distance=0.0&units=esriSRUnit_Meter&relationParam=&returnGeodetic=false&outFields=*&returnGeometry=true&featureEncoding=esriDefault&multipatchOption=xyFootprint&maxAllowableOffset=&geometryPrecision=&outSR=&defaultSR=&datumTransformation=&applyVCSProjection=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnExtentOnly=false&returnQueryGeometry=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&returnZ=false&returnM=false&returnExceededLimitFeatures=true&quantizationParameters=&sqlFormat=none&f=geojson&token=")}changeVisibility(e,t,a){console.log(e),console.log(t),e.forEach((e=>{a.map.setLayoutProperty(e,"visibility",t)}))}clearApp(e){console.log(e);const t=e.shadowRoot;for(;t.firstChild;)t.removeChild(t.firstChild)}clearPanel(e){}updateBoundaries(e){console.log(e.target.formCheck.checked);const t=document.getElementsByTagName("d6-business-map");let a=null===t[0].getAttribute("data-active-boundaries")?"":t[0].getAttribute("data-active-boundaries"),r=a.split(",");if(a=[],e.target.formCheck.checked)a=r,a.push(e.target.formCheck.value);else{let t=e.target.formCheck.value.split(",");r.forEach((e=>{!t.includes(e)&&a.push(e)}))}a=a.join(","),t[0].setAttribute("data-active-boundaries",a)}updateMainData(e){console.log(e.target.formCheck.checked);const t=document.getElementsByTagName("d6-business-map");let a=null===t[0].getAttribute("data-active-filters")?"":t[0].getAttribute("data-active-filters"),r=a.split(",");if(a=[],e.target.formCheck.checked)a=r,a.push(e.target.formCheck.value);else{let t=e.target.formCheck.value.split(",");r.forEach((e=>{!t.includes(e)&&a.push(e)}))}a=a.join(","),t[0].setAttribute("data-active-filters",a)}loadApp(e){console.log(e.getAttribute("data-app-state"));const t=e.shadowRoot,a=document.createElement("div");a.id="app-wrapper";document.createElement("app-data-loader");switch(e.getAttribute("data-app-state")){case"active-panel":let e=JSON.parse(this.getAttribute("data-panel-data"));console.log(e.properties),this.panelContent.innerHTML='\n                    <p style="background-color:#745DA8;color:#fff" class="fs-3 fw-bold text-center">'.concat(e.properties.business_name,"</p>\n                    <p><strong>Address:</strong> ").concat(e.properties.address,"\n                    ").concat(e.properties.profit_or_nonprofit?"<p><strong>Business Type:</strong> ".concat(e.properties.profit_or_nonprofit,"</p>"):"","\n\n                    <p><strong>Business Owner Demographics:</strong></p>\n                    <ul>\n                    ").concat(e.properties.is_asian_owned?"<li><strong>Asian Owned:</strong> Yes</li>":"<li><strong>Asian Owned:</strong> No</li>","\n                    ").concat(e.properties.is_black_owned?"<li><strong>Black Owned:</strong> Yes</li>":"<li><strong>Black Owned:</strong> No</li>","\n                    ").concat(e.properties.is_lgbtq_owned?"<li><strong>LGBTQ Owned:</strong> Yes</li>":"<li><strong>LGBTQ Owned:</strong> No</li>","\n                    ").concat(e.properties.is_indigenous_owned?"<li><strong>Indigenous Owned:</strong> Yes</li>":"<li><strong>Indigenous Owned:</strong> No</li>","\n                    ").concat(e.properties.is_middle_eastern_owned?"<li><strong>Middle Eastern Owned:</strong> Yes</li>":"<li><strong>Middle Eastern Owned:</strong> No</li>","\n                    ").concat(e.properties.is_veteran_owned?"<li><strong>Veteran Owned:</strong> Yes</li>":"<li><strong>Veteran Owned:</strong> No</li>","\n                    ").concat(e.properties.is_minority_owned?"<li><strong>Minority Owned:</strong> Yes</li>":"<li><strong>Minority Owned:</strong> No</li>","\n                    ").concat(e.properties.is_woman_owned?"<li><strong>Woman Owned:</strong> Yes</li>":"<li><strong>Woman Owned:</strong> No</li>","\n                    </ul>\n\n                    <p><strong>Service:</strong></p>\n                    <ul>\n                    ").concat(e.properties.has_clinic_community_health_ser?"<li><strong>Community Health:</strong> Yes</li>":"<li><strong>Community Health:</strong> No</li>","\n                    ").concat(e.properties.has_dental_service?"<li><strong>Dental:</strong> Yes</li>":"<li><strong>Dental:</strong> No</li>","\n                    ").concat(e.properties.has_emergency_urgent_care_servi?"<li><strong>Urgen Care:</strong> Yes</li>":"<li><strong>Urgent Care:</strong> No</li>","\n                    ").concat(e.properties.has_family_health_service?"<li><strong>Family Health:</strong> Yes</li>":"<li><strong>Family Health:</strong> No</li>","\n                    ").concat(e.properties.has_mental_health_service?"<li><strong>Mental Health:</strong> Yes</li>":"<li><strong>Mental Health:</strong> No</li>","\n                    ").concat(e.properties.has_pediatric_service?"<li><strong>Pediatrics:</strong> Yes</li>":"<li><strong>Pediatrics:</strong> No</li>","\n                    ").concat(e.properties.has_primary_care_service?"<li><strong>Primary Care:</strong> Yes</li>":"<li><strong>Primary Care:</strong> No</li>","\n                    ").concat(e.properties.has_sexual_health_service?"<li><strong>Sexual Health:</strong> Yes</li>":"<li><strong>Sexual Health:</strong> No</li>","\n                    ").concat(e.properties.has_specialist_service?"<li><strong>Specialist:</strong> Yes</li>":"<li><strong>Specialist:</strong> No</li>","\n                    ").concat(e.properties.has_other_health_service?"<li><strong>Other Health Services:</strong> Yes</li>":"<li><strong>Other Health Services:</strong> No</li>","\n                    </ul>\n\n                    <p><strong>Amenities:</strong></p>\n                    <p>\n                    ").concat(e.properties.is_public_transit_accessible?'<cod-icon data-icon="house" data-size="small"></cod-icon>':"","\n                    ").concat(e.properties.is_ada_accessible?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    ").concat(e.properties.has_bike_rack?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    ").concat(e.properties.has_parking_lot?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    ").concat(e.properties.is_cash_only?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    ").concat(e.properties.has_free_wifi?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    ").concat(e.properties.has_gender_neutral_bathrooms?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    ").concat(e.properties.has_rental_space?'<cod-icon data-icon="calendar" data-size="small"></cod-icon>':""," \n                    </p>\n                "),this.panel.setAttribute("data-show","true");break;case"active-filters":this.panelContent.innerHTML="";const t=document.createElement("p");t.innerText="Data Filters",t.style.backgroundColor="#745DA8",t.style.color="#fff",t.className="fs-3 fw-bold text-center";const r=document.createElement("p");r.innerText="By ownership:",r.style.fontWeight="bold";const i=document.createElement("cod-form-check-group");i.setAttribute("data-type","checkbox");const s=document.createElement("cod-form-check");s.setAttribute("data-checked","false"),s.setAttribute("data-id","asian-owned"),s.setAttribute("data-name","data-filters"),s.setAttribute("data-value","is_asian_owned"),s.setAttribute("data-type","checkbox"),s.setAttribute("data-label","Asian Owned"),s.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateMainData(e)}));const n=document.createElement("cod-form-check");n.setAttribute("data-checked","false"),n.setAttribute("data-id","black-owned"),n.setAttribute("data-name","data-filters"),n.setAttribute("data-value","is_black_owned"),n.setAttribute("data-type","checkbox"),n.setAttribute("data-label","Back Owned"),n.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateMainData(e)}));const o=document.createElement("p");o.innerText="By services:",o.style.fontWeight="bold";const l=document.createElement("cod-form-check-group");l.setAttribute("data-type","checkbox");const c=document.createElement("cod-form-check");c.setAttribute("data-checked","false"),c.setAttribute("data-id","community-health"),c.setAttribute("data-name","data-filters"),c.setAttribute("data-value","has_clinic_community_health_ser"),c.setAttribute("data-type","checkbox"),c.setAttribute("data-label","Community Health"),c.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateMainData(e)})),this.panelContent.appendChild(t),this.panelContent.appendChild(r),i.appendChild(s),i.appendChild(n),this.panelContent.appendChild(i),this.panelContent.appendChild(o),l.appendChild(c),this.panelContent.appendChild(l),this.panel.setAttribute("data-show","true");break;case"active-layers":this.panelContent.innerHTML="";const d=document.createElement("p");d.innerText="Boundaries",d.style.backgroundColor="#745DA8",d.style.color="#fff",d.className="fs-3 fw-bold text-center";const u=document.createElement("cod-form-check-group");u.setAttribute("data-type","checkbox");const p=document.createElement("cod-form-check");p.setAttribute("data-checked","true"),p.setAttribute("data-id","council-district"),p.setAttribute("data-name","map-layer"),p.setAttribute("data-value","coucil-district-6-lines"),p.setAttribute("data-type","checkbox"),p.setAttribute("data-label","Council District"),p.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateBoundaries(e)}));const m=document.createElement("cod-form-check");m.setAttribute("data-id","neighborhoods"),m.setAttribute("data-name","map-layer"),m.setAttribute("data-value","neighborhoods-lines,neighborhoods-fill,neighborhood-labels"),m.setAttribute("data-type","checkbox"),m.setAttribute("data-label","Neighborhoods"),m.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateBoundaries(e)}));const f=document.createElement("cod-form-check");f.setAttribute("data-id","police-precincts"),f.setAttribute("data-name","map-layer"),f.setAttribute("data-value","police-precincts-lines,police-precincts-fill"),f.setAttribute("data-type","checkbox"),f.setAttribute("data-label","Police Precincts"),f.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateBoundaries(e)}));const h=document.createElement("cod-form-check");h.setAttribute("data-id","zip-codes"),h.setAttribute("data-name","map-layer"),h.setAttribute("data-value","zip-codes-lines,zip-codes-fill"),h.setAttribute("data-type","checkbox"),h.setAttribute("data-label","Zip Codes"),h.addEventListener("change",(e=>{console.log(e.target.formCheck.checked),this.updateBoundaries(e)})),this.panelContent.appendChild(d),u.appendChild(p),u.appendChild(m),u.appendChild(f),u.appendChild(h),this.panelContent.appendChild(u),this.panel.setAttribute("data-show","true");break;case"active-info":this.panelContent.innerHTML='\n                    <p style="background-color:#745DA8;color:#fff" class="fs-3 fw-bold text-center">Informantion</p>\n                    <p><cod-icon data-icon="house" data-size="small"></cod-icon> Wifi</p>\n                    <p><cod-icon data-icon="house" data-size="small"></cod-icon> Wifi</p>\n                    <p><cod-icon data-icon="house" data-size="small"></cod-icon> Wifi</p>\n                    <p><cod-icon data-icon="house" data-size="small"></cod-icon> Wifi</p>\n                ',this.panel.setAttribute("data-show","true");break;case"error":display.setAttribute("data-display-type","error"),a.appendChild(display);break;case"print":display.setAttribute("data-display-type","print"),a.appendChild(display)}null==t.firstChild&&t.appendChild(a)}}customElements.define("d6-business-map",u)}},e=>{e.O(0,[308,200,432],(()=>{return t=596,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.js.map